import{d as H,r as i,c as I,m as W,o as D,a as A,b as l,e as s,h as f,k as T,w as L,f as c,F as h,g as k,i as q,j as r,n as z,p as Y,l as O,_ as G}from"./index-BdLefm1d.js";import{M as C,r as J}from"./projects-Bo_SEYzB.js";const K={class:"project-detail"},Q={class:"project-container"},X={key:0,class:"loading-state"},Z={key:1,class:"error-state"},ee={key:2},te={class:"project-image"},se=["src","alt"],oe={class:"project-content"},ne={class:"content-main"},le={class:"project-links"},re=["href"],ae=["href"],ie={class:"project-tags"},ce=["innerHTML"],ue={key:1,class:"content-loading"},de={class:"toc","aria-label":"Table of contents"},ve=["href","onClick"],pe={key:0,class:"related-projects"},fe={class:"related-grid grid grid-responsive"},ge={class:"related-tags"},me=H({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(E,{emit:B}){const $=E,g=B,o=i(null),y=i([]),m=i(""),_=i([]),j=i(!1),b=i(null),v=i(),P=i();let p=null;const M=I(()=>!o.value||!y.value.length?[]:y.value.filter(e=>e.id!==o.value.id&&(e.category===o.value.category||e.tags.some(t=>o.value.tags.includes(t)))).slice(0,4)),U=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${t}${e}`:`${t}/${e}`},x=async()=>{j.value=!0,b.value=null,o.value=null,m.value="",_.value=[],g("sticky-title-change",null);try{const e=await C.loadProjectsData();y.value=e.projects;const t=await C.loadProjectContent($.slug);o.value=t.frontmatter,g("sticky-title-change",o.value.title);const a=window.location.hostname==="mrleemurray.github.io"?"/site":"",n=t.content.replace(/!\[([^\]]*)\]\(([^)]+)\)/gim,(u,S,d)=>{const w=d.startsWith("/")?`${a}${d}`:d.startsWith("http")?d:`${a}/${d}`;return`![${S}](${w})`});m.value=J(n),_.value=C.extractTableOfContents(t.content),setTimeout(()=>{V()},100)}catch(e){b.value=e instanceof Error?e.message:"Failed to load project",console.error("Error loading project:",e)}finally{j.value=!1}};W(()=>$.slug,()=>{x()});const V=()=>{if(!v.value)return;const e=document.createElement("div");e.style.height="1px",e.style.position="absolute",e.style.top="calc(var(--space-16) - 7px)",e.style.left="0",e.style.right="0",e.style.pointerEvents="none",e.setAttribute("data-sticky-sentinel","true"),v.value.parentNode?.insertBefore(e,v.value),p=new IntersectionObserver(t=>{t.forEach(a=>{a.target===e&&(!a.isIntersecting&&o.value?.title?g("sticky-title-change",o.value.title):window.innerWidth<=767||g("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),p.observe(e)},N=()=>{p&&(p.disconnect(),p=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(t=>t.remove())},R=e=>{const t=document.getElementById(e);if(!t)return;const a=v.value?.offsetHeight||0,n=getComputedStyle(document.documentElement),w=(parseFloat(n.getPropertyValue("--space-16"))*16||64)-6+a+20,F=t.getBoundingClientRect().top+window.pageYOffset-w;window.scrollTo({top:F,behavior:"smooth"})};return D(()=>{x()}),A(()=>{N()}),(e,t)=>{const a=q("router-link");return r(),l("div",K,[s("div",Q,[j.value?(r(),l("div",X,[...t[0]||(t[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading project...",-1)])])):b.value?(r(),l("div",Z,[t[2]||(t[2]=s("h2",null,"Project Not Found",-1)),T(a,{to:"/",class:"btn btn-primary"},{default:L(()=>[...t[1]||(t[1]=[O(" ← Back to Projects ",-1)])]),_:1})])):o.value?(r(),l("div",ee,[s("div",te,[s("img",{src:U(o.value.image),alt:o.value.title},null,8,se)]),s("div",oe,[s("div",ne,[s("div",{ref_key:"projectMetaRef",ref:v,class:"project-meta"},[s("div",le,[o.value.liveUrl?(r(),l("a",{key:0,href:o.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.liveUrlLabel||"View Live Site"),9,re)):f("",!0),o.value.sourceUrl?(r(),l("a",{key:1,href:o.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.sourceUrlLabel||"View Source"),9,ae)):f("",!0)]),s("div",ie,[(r(!0),l(h,null,k(o.value.tags,n=>(r(),l("span",{key:n,class:"tag"},c(n),1))),128))])],512),m.value?(r(),l("div",{key:0,class:"markdown-content",innerHTML:m.value},null,8,ce)):(r(),l("div",ue,[...t[3]||(t[3]=[s("p",null,"Loading project details...",-1)])]))]),_.value.length>0?(r(),l("aside",{key:0,ref_key:"tocRef",ref:P,class:"content-sidebar"},[s("nav",de,[t[4]||(t[4]=s("h3",null,"Table of Contents",-1)),s("ul",null,[(r(!0),l(h,null,k(_.value,n=>(r(),l("li",{key:n.id,class:z(`toc-level-${n.level}`)},[s("a",{href:`#${n.id}`,onClick:Y(u=>R(n.id),["prevent"])},c(n.text),9,ve)],2))),128))])])],512)):f("",!0)]),M.value.length>0?(r(),l("section",pe,[t[5]||(t[5]=s("h2",null,"Related Projects",-1)),s("div",fe,[(r(!0),l(h,null,k(M.value,n=>(r(),l("article",{key:n.id,class:"related-card"},[s("h3",null,[T(a,{to:`/projects/${n.id}`},{default:L(()=>[O(c(n.title),1)]),_:2},1032,["to"])]),s("p",null,c(n.description),1),s("div",ge,[(r(!0),l(h,null,k(n.tags.slice(0,3),u=>(r(),l("span",{key:u,class:"tag"},c(u),1))),128))])]))),128))])])):f("",!0)])):f("",!0)])])}}}),ye=G(me,[["__scopeId","data-v-5f541133"]]);export{ye as default};
