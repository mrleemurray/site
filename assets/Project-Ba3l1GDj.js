import{d as D,r as h,c as F,m as q,o as A,a as z,b as i,e as a,h as b,k as x,w as S,f as k,F as j,g as C,p as G,i as Y,j as c,n as J,q as K,l as E,_ as Q}from"./index-DymBK9DC.js";import{a as X,b as O,m as Z,f as ee,c as te,i as se,d as ne,e as oe,g as T,h as $,M as P}from"./projects-jskN3Ygq.js";const le=()=>{const s=new X({html:!0,linkify:!0,typographer:!0,breaks:!0});s.use(O,{permalink:O.permalink.headerLink()}),s.use(Z,{includeLevel:[1,2,3,4],containerClass:"table-of-contents",listType:"ul"}),s.use(ee),s.use(te,{enabled:!0}),s.use(se),s.use(ne),s.use(oe),s.use(T,"info",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-info">
`:`</div>
`}),s.use(T,"tip",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-tip">
`:`</div>
`}),s.use(T,"warning",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-warning">
`:`</div>
`}),s.use(T,"danger",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-danger">
`:`</div>
`}),s.renderer.rules.fence=(r,n)=>{const e=r[n],o=(e.info?e.info.trim():"").split(/\s+/g)[0];let u;if(o&&$.languages[o])try{u=$.highlight(e.content,$.languages[o],o)}catch(m){console.warn("Prism highlighting failed:",m),u=s.utils.escapeHtml(e.content)}else u=s.utils.escapeHtml(e.content);return`<pre><code class="hljs${o?` language-${o}`:""}">${u}</code></pre>`};const g=s.renderer.rules.link_open||function(r,n,e,p,o){return o.renderToken(r,n,e)};return s.renderer.rules.link_open=function(r,n,e,p,o){const u=r[n],v=u.attrGet("href");return v&&(v.startsWith("http")||v.startsWith("//"))&&(u.attrSet("target","_blank"),u.attrSet("rel","noopener noreferrer")),g(r,n,e,p,o)},s},I=le();function re(s,g=""){console.log("🔄 Processing enhanced markdown...",{hasCallouts:s.includes(":::"),hasTaskLists:s.includes("- [ ]")||s.includes("- [x]"),hasCodeBlocks:s.includes("```"),contentLength:s.length});let r=s;g&&(r=s.replace(/!\[([^\]]*)\]\(([^)]+)\)/gim,(e,p,o)=>{const u=o.startsWith("/")?`${g}${o}`:o.startsWith("http")?o:`${g}/${o}`;return`![${p}](${u})`}));const n=I.render(r);return console.log("✅ Enhanced markdown processed",{resultLength:n.length,hasCalloutDivs:n.includes("callout-"),hasTaskListItems:n.includes("task-list-item"),hasHighlightedCode:n.includes('class="hljs')}),n}function ae(s){const g=I.parse(s,{}),r=[];return g.forEach(n=>{if(n.type==="heading_open"){const e=parseInt(n.tag.slice(1)),p=g[g.indexOf(n)+1];if(p&&p.type==="inline"){const o=p.content,u=o.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim();r.push({id:u,text:o,level:e})}}}),r}const ie={class:"project-detail"},ce={class:"project-container"},ue={key:0,class:"loading-state"},de={key:1,class:"error-state"},pe={key:2},ge={class:"project-image"},fe=["src","alt"],ve={class:"project-content"},he={class:"content-main"},ke={class:"project-links"},me=["href"],_e=["href"],ye={class:"project-tags"},we=["innerHTML"],be={key:1,class:"content-loading"},je={class:"toc","aria-label":"Table of contents"},Ce=["href","onClick"],Te={key:0,class:"related-projects"},$e={class:"related-grid grid grid-responsive"},Le={class:"related-tags"},Me=D({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(s,{emit:g}){const r=s,n=g,e=h(null),p=h([]),o=h(""),u=h([]),v=h(!1),m=h(null),_=h(),B=h();let y=null;const L=F(()=>!e.value||!p.value.length?[]:p.value.filter(t=>t.id!==e.value.id&&(t.category===e.value.category||t.tags.some(l=>e.value.tags.includes(l)))).slice(0,4)),H=t=>{if(!t)return"";if(t.startsWith("http"))return t;const l=window.location.hostname==="mrleemurray.github.io"?"/site":"";return t.startsWith("/")?`${l}${t}`:`${l}/${t}`},M=async()=>{v.value=!0,m.value=null,e.value=null,o.value="",u.value=[],n("sticky-title-change",null);try{const t=await P.loadProjectsData();p.value=t.projects;const l=await P.loadProjectContent(r.slug);e.value=l.frontmatter,n("sticky-title-change",e.value.title);const f=window.location.hostname==="mrleemurray.github.io"?"/site":"";o.value=re(l.content,f),u.value=ae(l.content),await G(),console.log("🔍 Markdown content set:",{hasCallouts:o.value.includes("callout-"),hasTaskLists:o.value.includes("task-list-item"),contentPreview:o.value.substring(0,200)}),setTimeout(()=>{N()},100)}catch(t){m.value=t instanceof Error?t.message:"Failed to load project",console.error("Error loading project:",t)}finally{v.value=!1}};q(()=>r.slug,()=>{M()});const N=()=>{if(!_.value)return;const t=document.createElement("div");t.style.height="1px",t.style.position="absolute",t.style.top="calc(var(--space-16) - 7px)",t.style.left="0",t.style.right="0",t.style.pointerEvents="none",t.setAttribute("data-sticky-sentinel","true"),_.value.parentNode?.insertBefore(t,_.value),y=new IntersectionObserver(l=>{l.forEach(f=>{f.target===t&&(!f.isIntersecting&&e.value?.title?n("sticky-title-change",e.value.title):window.innerWidth<=767||n("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),y.observe(t)},R=()=>{y&&(y.disconnect(),y=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(l=>l.remove())},U=t=>{const l=document.getElementById(t);if(!l)return;const f=_.value?.offsetHeight||0,d=getComputedStyle(document.documentElement),V=(parseFloat(d.getPropertyValue("--space-16"))*16||64)-6+f+20,W=l.getBoundingClientRect().top+window.pageYOffset-V;window.scrollTo({top:W,behavior:"smooth"})};return A(()=>{M()}),z(()=>{R()}),(t,l)=>{const f=Y("router-link");return c(),i("div",ie,[a("div",ce,[v.value?(c(),i("div",ue,[...l[0]||(l[0]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading project...",-1)])])):m.value?(c(),i("div",de,[l[2]||(l[2]=a("h2",null,"Project Not Found",-1)),x(f,{to:"/",class:"btn btn-primary"},{default:S(()=>[...l[1]||(l[1]=[E(" ← Back to Projects ",-1)])]),_:1})])):e.value?(c(),i("div",pe,[a("div",ge,[a("img",{src:H(e.value.image),alt:e.value.title},null,8,fe)]),a("div",ve,[a("div",he,[a("div",{ref_key:"projectMetaRef",ref:_,class:"project-meta"},[a("div",ke,[e.value.liveUrl?(c(),i("a",{key:0,href:e.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},k(e.value.liveUrlLabel||"View Live Site"),9,me)):b("",!0),e.value.sourceUrl?(c(),i("a",{key:1,href:e.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},k(e.value.sourceUrlLabel||"View Source"),9,_e)):b("",!0)]),a("div",ye,[(c(!0),i(j,null,C(e.value.tags,d=>(c(),i("span",{key:d,class:"tag"},k(d),1))),128))])],512),o.value?(c(),i("div",{key:`markdown-${r.slug}-${o.value.length}`,class:"markdown-content",innerHTML:o.value},null,8,we)):(c(),i("div",be,[...l[3]||(l[3]=[a("p",null,"Loading project details...",-1)])]))]),u.value.length>0?(c(),i("aside",{key:0,ref_key:"tocRef",ref:B,class:"content-sidebar"},[a("nav",je,[l[4]||(l[4]=a("h3",null,"Table of Contents",-1)),a("ul",null,[(c(!0),i(j,null,C(u.value,d=>(c(),i("li",{key:d.id,class:J(`toc-level-${d.level}`)},[a("a",{href:`#${d.id}`,onClick:K(w=>U(d.id),["prevent"])},k(d.text),9,Ce)],2))),128))])])],512)):b("",!0)]),L.value.length>0?(c(),i("section",Te,[l[5]||(l[5]=a("h2",null,"Related Projects",-1)),a("div",$e,[(c(!0),i(j,null,C(L.value,d=>(c(),i("article",{key:d.id,class:"related-card"},[a("h3",null,[x(f,{to:`/projects/${d.id}`},{default:S(()=>[E(k(d.title),1)]),_:2},1032,["to"])]),a("p",null,k(d.description),1),a("div",Le,[(c(!0),i(j,null,C(d.tags.slice(0,3),w=>(c(),i("span",{key:w,class:"tag"},k(w),1))),128))])]))),128))])])):b("",!0)])):b("",!0)])])}}}),Ie=Q(Me,[["__scopeId","data-v-7fbebd2d"]]);export{Ie as default};
