import{d as W,r as u,c as q,w as Y,o as G,a as J,b as a,e as s,h as k,k as T,l as E,p as K,q as Q,n as B,f as p,F as b,g as j,s as X,i as Z,j as r,v as ee,m as H,_ as te}from"./index-CEQzlZT6.js";import{M as U}from"./projects-BDukN6dN.js";const se={class:"project-detail"},le={class:"project-container"},oe={key:0,class:"loading-state"},ne={key:1,class:"error-state"},ae={key:2},re={class:"project-image"},ce=["alt"],ie={class:"project-content"},ue={class:"content-main"},de={class:"project-links"},pe=["href"],ge=["href"],ve={class:"project-tags"},me=["innerHTML"],fe={key:1,class:"content-loading"},he={class:"toc","aria-label":"Table of contents"},_e=["href","onClick"],ke={key:0,class:"related-projects"},ye={class:"related-grid grid grid-responsive"},$e={class:"related-image"},we=["src","alt"],be={class:"related-tags"},je=W({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(V,{emit:D}){const S=V,y=D,o=u(null),x=u([]),m=u(""),$=u([]),C=u(!1),L=u(null),w=u(!1),f=u(),N=u();let h=null;const O=q(()=>!o.value||!x.value.length?[]:x.value.filter(e=>e.id!==o.value.id&&(e.category===o.value.category||e.tags.some(t=>o.value.tags.includes(t)))).slice(0,4)),M=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${t}${e}`:`${t}/${e}`},R=()=>{w.value=!0},F=()=>{w.value=!0},I=async()=>{C.value=!0,L.value=null,o.value=null,m.value="",$.value=[],w.value=!1,y("sticky-title-change",null);try{const e=await U.loadProjectsData();x.value=e.projects;const t=await U.loadProjectContent(S.slug);o.value=t.frontmatter,y("sticky-title-change",o.value.title);const i=window.location.hostname==="mrleemurray.github.io"?"/site":"",g=t.content.matchAll(/^(#{1,6})\s+(.*)$/gm),l=Array.from(g).map(c=>{const n=c[1].length,d=c[2].trim(),_=d.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return{level:n,text:d,id:_}});$.value=l;let v=t.content.replace(/^### (.*$)/gim,(c,n)=>`<h3 id="${n.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}">${n}</h3>`).replace(/^## (.*$)/gim,(c,n)=>`<h2 id="${n.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}">${n}</h2>`).replace(/^# (.*$)/gim,(c,n)=>`<h1 id="${n.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}">${n}</h1>`).replace(/\*\*\*(.*?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/::: info\n([\s\S]*?)\n:::/g,'<div class="callout callout-info"><p>$1</p></div>').replace(/::: tip\n([\s\S]*?)\n:::/g,'<div class="callout callout-tip"><p>$1</p></div>').replace(/::: warning\n([\s\S]*?)\n:::/g,'<div class="callout callout-warning"><p>$1</p></div>').replace(/::: danger\n([\s\S]*?)\n:::/g,'<div class="callout callout-danger"><p>$1</p></div>').replace(/^- \[ \] (.*)$/gm,'<li class="task-list-item"><input type="checkbox" disabled> $1</li>').replace(/^- \[x\] (.*)$/gm,'<li class="task-list-item"><input type="checkbox" checked disabled> $1</li>').replace(/==(.*?)==/g,"<mark>$1</mark>").replace(/\+\+(.*?)\+\+/g,"<ins>$1</ins>").replace(/```(\w+)?\n([\s\S]*?)```/g,'<pre><code class="hljs language-$1">$2</code></pre>').replace(/`([^`]+)`/g,"<code>$1</code>").replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(c,n,d)=>{const _=n||"Project image";return`<img src="${M(d)}" alt="${_}" />`}).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replace(/^- (.*)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)(\n<li>.*<\/li>)*/g,c=>"<ul>"+c.replace(/\n/g,"")+"</ul>").replace(/(<li class="task-list-item">.*<\/li>)(\n<li class="task-list-item">.*<\/li>)*/g,c=>"<ul>"+c.replace(/\n/g,"")+"</ul>").split(`

`).map(c=>{const n=c.trim();return n===""?"":n.startsWith("<")?n:`<p>${n}</p>`}).filter(c=>c!=="").join(`
`);m.value=v,await X(),setTimeout(()=>{P()},100)}catch(e){console.error("❌ Error loading project:",e),L.value=e instanceof Error?e.message:"Failed to load project"}finally{C.value=!1}};Y(()=>S.slug,()=>{I()});const P=()=>{if(!f.value)return;const e=document.createElement("div");e.style.height="1px",e.style.position="absolute",e.style.top="calc(var(--space-16) - 7px)",e.style.left="0",e.style.right="0",e.style.pointerEvents="none",e.setAttribute("data-sticky-sentinel","true"),f.value.parentNode?.insertBefore(e,f.value),h=new IntersectionObserver(t=>{t.forEach(i=>{i.target===e&&(!i.isIntersecting&&o.value?.title?y("sticky-title-change",o.value.title):window.innerWidth<=767||y("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),h.observe(e)},z=()=>{h&&(h.disconnect(),h=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(t=>t.remove())},A=e=>{const t=document.getElementById(e);if(!t)return;const i=f.value?.offsetHeight||0,g=getComputedStyle(document.documentElement),n=(parseFloat(g.getPropertyValue("--space-16"))*16||64)-6+i+20,_=t.getBoundingClientRect().top+window.pageYOffset-n;window.scrollTo({top:_,behavior:"smooth"})};return G(()=>{I()}),J(()=>{z()}),(e,t)=>{const i=Z("router-link"),g=Q("lazy");return r(),a("div",se,[s("div",le,[C.value?(r(),a("div",oe,[...t[0]||(t[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading project...",-1)])])):L.value?(r(),a("div",ne,[t[2]||(t[2]=s("h2",null,"Project Not Found",-1)),T(i,{to:"/",class:"btn btn-primary"},{default:E(()=>[...t[1]||(t[1]=[H(" ← Back to Projects ",-1)])]),_:1})])):o.value?(r(),a("div",ae,[s("div",re,[K(s("img",{alt:o.value.title,class:B({loaded:w.value}),onLoad:R,onError:F},null,42,ce),[[g,M(o.value.image)]])]),s("div",ie,[s("div",ue,[s("div",{ref_key:"projectMetaRef",ref:f,class:"project-meta"},[s("div",de,[o.value.liveUrl?(r(),a("a",{key:0,href:o.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},p(o.value.liveUrlLabel||"View Live Site"),9,pe)):k("",!0),o.value.sourceUrl?(r(),a("a",{key:1,href:o.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},p(o.value.sourceUrlLabel||"View Source"),9,ge)):k("",!0)]),s("div",ve,[(r(!0),a(b,null,j(o.value.tags,l=>(r(),a("span",{key:l,class:"tag"},p(l),1))),128))])],512),m.value?(r(),a("div",{key:`markdown-${S.slug}-${m.value.length}`,class:"markdown-content",innerHTML:m.value},null,8,me)):(r(),a("div",fe,[...t[3]||(t[3]=[s("p",null,"Loading project details...",-1)])]))]),$.value.length>0?(r(),a("aside",{key:0,ref_key:"tocRef",ref:N,class:"content-sidebar"},[s("nav",he,[t[4]||(t[4]=s("h3",null,"Table of Contents",-1)),s("ul",null,[(r(!0),a(b,null,j($.value,l=>(r(),a("li",{key:l.id,class:B(`toc-level-${l.level}`)},[s("a",{href:`#${l.id}`,onClick:ee(v=>A(l.id),["prevent"])},p(l.text),9,_e)],2))),128))])])],512)):k("",!0)]),O.value.length>0?(r(),a("section",ke,[t[5]||(t[5]=s("h2",null,"Related Projects",-1)),s("div",ye,[(r(!0),a(b,null,j(O.value,l=>(r(),a("article",{key:l.id,class:"related-card"},[s("div",$e,[T(i,{to:`/projects/${l.id}`},{default:E(()=>[s("img",{src:M(l.image),alt:l.title,loading:"lazy"},null,8,we)]),_:2},1032,["to"])]),s("h3",null,[T(i,{to:`/projects/${l.id}`},{default:E(()=>[H(p(l.title),1)]),_:2},1032,["to"])]),s("p",null,p(l.description),1),s("div",be,[(r(!0),a(b,null,j(l.tags.slice(0,3),v=>(r(),a("span",{key:v,class:"tag"},p(v),1))),128))])]))),128))])])):k("",!0)])):k("",!0)])])}}}),Le=te(je,[["__scopeId","data-v-48cd3bf9"]]);export{Le as default};
