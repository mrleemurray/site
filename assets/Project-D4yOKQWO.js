import{d as N,r,c as P,m as R,o as F,a as D,b as n,e as s,h as v,k as T,w as x,f as c,F as k,g as y,i as A,j as l,n as W,p as q,l as E,_ as z}from"./index-C75uTgO7.js";import{M as h}from"./projects-DuXTED6R.js";const Y={class:"project-detail"},G={class:"project-container"},J={key:0,class:"loading-state"},K={key:1,class:"error-state"},Q={key:2},X={class:"project-image"},Z=["src","alt"],ee={class:"project-content"},te={class:"content-main"},se={class:"project-links"},oe=["href"],ne=["href"],le={class:"project-tags"},ae=["innerHTML"],re={key:1,class:"content-loading"},ie={class:"toc","aria-label":"Table of contents"},ce=["href","onClick"],ue={key:0,class:"related-projects"},de={class:"related-grid grid grid-responsive"},pe={class:"related-tags"},ve=N({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(S,{emit:L}){const j=S,f=L,o=r(null),b=r([]),g=r(""),m=r([]),_=r(!1),w=r(null),u=r(),O=r();let d=null;const M=P(()=>!o.value||!b.value.length?[]:b.value.filter(e=>e.id!==o.value.id&&(e.category===o.value.category||e.tags.some(t=>o.value.tags.includes(t)))).slice(0,4)),B=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${t}${e}`:`${t}/${e}`},C=async()=>{_.value=!0,w.value=null,o.value=null,g.value="",m.value=[],f("sticky-title-change",null);try{const e=await h.loadProjectsData();b.value=e.projects;const t=await h.loadProjectContent(j.slug);o.value=t.frontmatter,f("sticky-title-change",o.value.title),g.value=h.parseMarkdownToHTML(t.content),m.value=h.extractTableOfContents(t.content),setTimeout(()=>{$()},100)}catch(e){w.value=e instanceof Error?e.message:"Failed to load project",console.error("Error loading project:",e)}finally{_.value=!1}};R(()=>j.slug,()=>{C()});const $=()=>{if(!u.value)return;const e=document.createElement("div");e.style.height="1px",e.style.position="absolute",e.style.top="calc(var(--space-16) - 7px)",e.style.left="0",e.style.right="0",e.style.pointerEvents="none",e.setAttribute("data-sticky-sentinel","true"),u.value.parentNode?.insertBefore(e,u.value),d=new IntersectionObserver(t=>{t.forEach(i=>{i.target===e&&(!i.isIntersecting&&o.value?.title?f("sticky-title-change",o.value.title):window.innerWidth<=767||f("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),d.observe(e)},U=()=>{d&&(d.disconnect(),d=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(t=>t.remove())},V=e=>{const t=document.getElementById(e);if(!t)return;const i=u.value?.offsetHeight||0,a=getComputedStyle(document.documentElement),H=(parseFloat(a.getPropertyValue("--space-16"))*16||64)-6+i+20,I=t.getBoundingClientRect().top+window.pageYOffset-H;window.scrollTo({top:I,behavior:"smooth"})};return F(()=>{const t=document.getElementById("app")?.getAttribute("data-project-slug");t&&j.slug,C()}),D(()=>{U()}),(e,t)=>{const i=A("router-link");return l(),n("div",Y,[s("div",G,[_.value?(l(),n("div",J,[...t[0]||(t[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading project...",-1)])])):w.value?(l(),n("div",K,[t[2]||(t[2]=s("h2",null,"Project Not Found",-1)),T(i,{to:"/",class:"btn btn-primary"},{default:x(()=>[...t[1]||(t[1]=[E(" ← Back to Projects ",-1)])]),_:1})])):o.value&&!_.value?(l(),n("div",Q,[s("div",X,[s("img",{src:B(o.value.image),alt:o.value.title},null,8,Z)]),s("div",ee,[s("div",te,[s("div",{ref_key:"projectMetaRef",ref:u,class:"project-meta"},[s("div",se,[o.value.liveUrl?(l(),n("a",{key:0,href:o.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.liveUrlLabel||"View Live Site"),9,oe)):v("",!0),o.value.sourceUrl?(l(),n("a",{key:1,href:o.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.sourceUrlLabel||"View Source"),9,ne)):v("",!0)]),s("div",le,[(l(!0),n(k,null,y(o.value.tags,a=>(l(),n("span",{key:a,class:"tag"},c(a),1))),128))])],512),g.value?(l(),n("div",{key:0,class:"markdown-content",innerHTML:g.value},null,8,ae)):(l(),n("div",re,[...t[3]||(t[3]=[s("p",null,"Loading project details...",-1)])]))]),m.value.length>0?(l(),n("aside",{key:0,ref_key:"tocRef",ref:O,class:"content-sidebar"},[s("nav",ie,[t[4]||(t[4]=s("h3",null,"Table of Contents",-1)),s("ul",null,[(l(!0),n(k,null,y(m.value,a=>(l(),n("li",{key:a.id,class:W(`toc-level-${a.level}`)},[s("a",{href:`#${a.id}`,onClick:q(p=>V(a.id),["prevent"])},c(a.text),9,ce)],2))),128))])])],512)):v("",!0)]),M.value.length>0?(l(),n("section",ue,[t[5]||(t[5]=s("h2",null,"Related Projects",-1)),s("div",de,[(l(!0),n(k,null,y(M.value,a=>(l(),n("article",{key:a.id,class:"related-card"},[s("h3",null,[T(i,{to:`/projects/${a.id}`},{default:x(()=>[E(c(a.title),1)]),_:2},1032,["to"])]),s("p",null,c(a.description),1),s("div",pe,[(l(!0),n(k,null,y(a.tags.slice(0,3),p=>(l(),n("span",{key:p,class:"tag"},c(p),1))),128))])]))),128))])])):v("",!0)])):v("",!0)])])}}}),ye=z(ve,[["__scopeId","data-v-2c4734ee"]]);export{ye as default};
