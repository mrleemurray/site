import{d as P,r as a,c as R,m as F,o as I,a as D,b as n,e as s,h as p,k as T,w as x,f as c,F as k,g as m,i as W,j as l,n as A,p as q,l as L,_ as z}from"./index-izg2o3QL.js";import{M as y}from"./projects-rjx-6vhj.js";const Y={class:"project-detail"},G={class:"project-container"},J={key:0,class:"loading-state"},K={key:1,class:"error-state"},Q={key:2},X={class:"project-image"},Z=["src","alt"],ee={class:"project-content"},te={class:"content-main"},se={class:"project-links"},oe=["href"],ne=["href"],le={class:"project-tags"},re=["innerHTML"],ae={key:1,class:"content-loading"},ie={class:"toc","aria-label":"Table of contents"},ce=["href","onClick"],ue={key:0,class:"related-projects"},de={class:"related-grid grid grid-responsive"},ve={class:"related-tags"},pe=P({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(S,{emit:O}){const w=S,f=O,o=a(null),h=a([]),g=a(""),_=a([]),j=a(!1),b=a(null),u=a(),E=a();let d=null;const C=R(()=>!o.value||!h.value.length?[]:h.value.filter(e=>e.id!==o.value.id&&(e.category===o.value.category||e.tags.some(t=>o.value.tags.includes(t)))).slice(0,4)),$=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${t}${e}`:`${t}/${e}`},M=async()=>{j.value=!0,b.value=null,g.value="",_.value=[],f("sticky-title-change",null);try{const e=await y.loadProjectsData();h.value=e.projects;const t=await y.loadProjectContent(w.slug);o.value=t.frontmatter,f("sticky-title-change",o.value.title),g.value=y.parseMarkdownToHTML(t.content),_.value=y.extractTableOfContents(t.content),setTimeout(()=>{B()},100)}catch(e){b.value=e instanceof Error?e.message:"Failed to load project",console.error("Error loading project:",e)}finally{j.value=!1}};F(()=>w.slug,()=>{M()});const B=()=>{if(!u.value)return;const e=document.createElement("div");e.style.height="1px",e.style.position="absolute",e.style.top="calc(var(--space-16) - 7px)",e.style.left="0",e.style.right="0",e.style.pointerEvents="none",e.setAttribute("data-sticky-sentinel","true"),u.value.parentNode?.insertBefore(e,u.value),d=new IntersectionObserver(t=>{t.forEach(i=>{i.target===e&&(!i.isIntersecting&&o.value?.title?f("sticky-title-change",o.value.title):window.innerWidth<=767||f("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),d.observe(e)},U=()=>{d&&(d.disconnect(),d=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(t=>t.remove())},V=e=>{const t=document.getElementById(e);if(!t)return;const i=u.value?.offsetHeight||0,r=getComputedStyle(document.documentElement),H=(parseFloat(r.getPropertyValue("--space-16"))*16||64)-6+i+20,N=t.getBoundingClientRect().top+window.pageYOffset-H;window.scrollTo({top:N,behavior:"smooth"})};return I(()=>{M()}),D(()=>{U()}),(e,t)=>{const i=W("router-link");return l(),n("div",Y,[s("div",G,[j.value?(l(),n("div",J,[...t[0]||(t[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading project...",-1)])])):b.value?(l(),n("div",K,[t[2]||(t[2]=s("h2",null,"Project Not Found",-1)),T(i,{to:"/",class:"btn btn-primary"},{default:x(()=>[...t[1]||(t[1]=[L(" ← Back to Projects ",-1)])]),_:1})])):o.value?(l(),n("div",Q,[s("div",X,[s("img",{src:$(o.value.image),alt:o.value.title},null,8,Z)]),s("div",ee,[s("div",te,[s("div",{ref_key:"projectMetaRef",ref:u,class:"project-meta"},[s("div",se,[o.value.liveUrl?(l(),n("a",{key:0,href:o.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.liveUrlLabel||"View Live Site"),9,oe)):p("",!0),o.value.sourceUrl?(l(),n("a",{key:1,href:o.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.sourceUrlLabel||"View Source"),9,ne)):p("",!0)]),s("div",le,[(l(!0),n(k,null,m(o.value.tags,r=>(l(),n("span",{key:r,class:"tag"},c(r),1))),128))])],512),g.value?(l(),n("div",{key:0,class:"markdown-content",innerHTML:g.value},null,8,re)):(l(),n("div",ae,[...t[3]||(t[3]=[s("p",null,"Loading project details...",-1)])]))]),_.value.length>0?(l(),n("aside",{key:0,ref_key:"tocRef",ref:E,class:"content-sidebar"},[s("nav",ie,[t[4]||(t[4]=s("h3",null,"Table of Contents",-1)),s("ul",null,[(l(!0),n(k,null,m(_.value,r=>(l(),n("li",{key:r.id,class:A(`toc-level-${r.level}`)},[s("a",{href:`#${r.id}`,onClick:q(v=>V(r.id),["prevent"])},c(r.text),9,ce)],2))),128))])])],512)):p("",!0)]),C.value.length>0?(l(),n("section",ue,[t[5]||(t[5]=s("h2",null,"Related Projects",-1)),s("div",de,[(l(!0),n(k,null,m(C.value,r=>(l(),n("article",{key:r.id,class:"related-card"},[s("h3",null,[T(i,{to:`/projects/${r.id}`},{default:x(()=>[L(c(r.title),1)]),_:2},1032,["to"])]),s("p",null,c(r.description),1),s("div",ve,[(l(!0),n(k,null,m(r.tags.slice(0,3),v=>(l(),n("span",{key:v,class:"tag"},c(v),1))),128))])]))),128))])])):p("",!0)])):p("",!0)])])}}}),ye=z(pe,[["__scopeId","data-v-9510e89d"]]);export{ye as default};
