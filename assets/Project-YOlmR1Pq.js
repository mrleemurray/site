import{d as P,r as i,c as R,m as F,o as I,a as D,b as n,e as s,h as p,k as T,w as x,f as c,F as y,g as _,i as W,j as l,n as A,p as q,l as L,_ as z}from"./index-Bc_hp5Au.js";import{M as k}from"./projects-C4Q5iqf2.js";const Y={class:"project-detail"},G={class:"project-container"},J={key:0,class:"loading-state"},K={key:1,class:"error-state"},Q={key:2},X={class:"project-image"},Z=["src","alt"],ee={class:"project-content"},te={class:"content-main"},se={class:"project-links"},oe=["href"],ne=["href"],le={class:"project-tags"},ae=["innerHTML"],re={key:1,class:"content-loading"},ie={class:"toc","aria-label":"Table of contents"},ce=["href","onClick"],ue={key:0,class:"related-projects"},de={class:"related-grid grid grid-responsive"},ve={class:"related-tags"},pe=P({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],async setup(S,{emit:O}){const w=S,f=O,o=i(null),h=i([]),m=i(""),g=i([]),j=i(!1),b=i(null),u=i(),E=i();let d=null;const C=R(()=>!o.value||!h.value.length?[]:h.value.filter(t=>t.id!==o.value.id&&(t.category===o.value.category||t.tags.some(e=>o.value.tags.includes(e)))).slice(0,4)),$=t=>{if(!t)return"";if(t.startsWith("http"))return t;const r=(typeof window<"u"?window.location.hostname:"mrleemurray.github.io")==="mrleemurray.github.io"?"/site":"";return t.startsWith("/")?`${r}${t}`:`${r}/${t}`},M=async(t=!1)=>{j.value=!0,b.value=null,o.value=null,m.value="",g.value=[],f("sticky-title-change",null);try{const e=await k.loadProjectsData();h.value=e.projects;const r=await k.loadProjectContent(w.slug);o.value=r.frontmatter,f("sticky-title-change",o.value.title),m.value=k.parseMarkdownToHTML(r.content),g.value=k.extractTableOfContents(r.content),t||setTimeout(()=>{B()},100)}catch(e){b.value=e instanceof Error?e.message:"Failed to load project",console.error("Error loading project:",e)}finally{j.value=!1}};F(()=>w.slug,()=>{M()});const B=()=>{if(!u.value)return;const t=document.createElement("div");t.style.height="1px",t.style.position="absolute",t.style.top="calc(var(--space-16) - 7px)",t.style.left="0",t.style.right="0",t.style.pointerEvents="none",t.setAttribute("data-sticky-sentinel","true"),u.value.parentNode?.insertBefore(t,u.value),d=new IntersectionObserver(e=>{e.forEach(r=>{r.target===t&&(!r.isIntersecting&&o.value?.title?f("sticky-title-change",o.value.title):window.innerWidth<=767||f("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),d.observe(t)},U=()=>{d&&(d.disconnect(),d=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(e=>e.remove())},V=t=>{const e=document.getElementById(t);if(!e)return;const r=u.value?.offsetHeight||0,a=getComputedStyle(document.documentElement),H=(parseFloat(a.getPropertyValue("--space-16"))*16||64)-6+r+20,N=e.getBoundingClientRect().top+window.pageYOffset-H;window.scrollTo({top:N,behavior:"smooth"})};return I(()=>{M()}),D(()=>{U()}),(t,e)=>{const r=W("router-link");return l(),n("div",Y,[s("div",G,[j.value?(l(),n("div",J,[...e[0]||(e[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading project...",-1)])])):b.value?(l(),n("div",K,[e[2]||(e[2]=s("h2",null,"Project Not Found",-1)),T(r,{to:"/",class:"btn btn-primary"},{default:x(()=>[...e[1]||(e[1]=[L(" ← Back to Projects ",-1)])]),_:1})])):o.value?(l(),n("div",Q,[s("div",X,[s("img",{src:$(o.value.image),alt:o.value.title},null,8,Z)]),s("div",ee,[s("div",te,[s("div",{ref_key:"projectMetaRef",ref:u,class:"project-meta"},[s("div",se,[o.value.liveUrl?(l(),n("a",{key:0,href:o.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.liveUrlLabel||"View Live Site"),9,oe)):p("",!0),o.value.sourceUrl?(l(),n("a",{key:1,href:o.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.sourceUrlLabel||"View Source"),9,ne)):p("",!0)]),s("div",le,[(l(!0),n(y,null,_(o.value.tags,a=>(l(),n("span",{key:a,class:"tag"},c(a),1))),128))])],512),m.value?(l(),n("div",{key:0,class:"markdown-content",innerHTML:m.value},null,8,ae)):(l(),n("div",re,[...e[3]||(e[3]=[s("p",null,"Loading project details...",-1)])]))]),g.value.length>0?(l(),n("aside",{key:0,ref_key:"tocRef",ref:E,class:"content-sidebar"},[s("nav",ie,[e[4]||(e[4]=s("h3",null,"Table of Contents",-1)),s("ul",null,[(l(!0),n(y,null,_(g.value,a=>(l(),n("li",{key:a.id,class:A(`toc-level-${a.level}`)},[s("a",{href:`#${a.id}`,onClick:q(v=>V(a.id),["prevent"])},c(a.text),9,ce)],2))),128))])])],512)):p("",!0)]),C.value.length>0?(l(),n("section",ue,[e[5]||(e[5]=s("h2",null,"Related Projects",-1)),s("div",de,[(l(!0),n(y,null,_(C.value,a=>(l(),n("article",{key:a.id,class:"related-card"},[s("h3",null,[T(r,{to:`/projects/${a.id}`},{default:x(()=>[L(c(a.title),1)]),_:2},1032,["to"])]),s("p",null,c(a.description),1),s("div",ve,[(l(!0),n(y,null,_(a.tags.slice(0,3),v=>(l(),n("span",{key:v,class:"tag"},c(v),1))),128))])]))),128))])])):p("",!0)])):p("",!0)])])}}}),ke=z(pe,[["__scopeId","data-v-f60aee42"]]);export{ke as default};
