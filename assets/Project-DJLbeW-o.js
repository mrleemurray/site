import{d as D,r as f,c as q,m as z,o as G,a as Y,b as d,e as i,h as b,k as x,w as E,f as m,F as j,g as M,p as J,i as K,j as g,n as Q,q as X,l as P,_ as Z}from"./index-CIs1mW-4.js";import{a as O,b as S,m as ee,f as te,c as se,i as ne,d as le,e as oe,g as L,h as C,M as B}from"./projects-DTH0a4U4.js";const re=()=>{const e=new O({html:!0,linkify:!0,typographer:!0,breaks:!0});e.use(S,{permalink:S.permalink.headerLink()}),e.use(ee,{includeLevel:[1,2,3,4],containerClass:"table-of-contents",listType:"ul"}),e.use(te),e.use(se,{enabled:!0}),e.use(ne),e.use(le),e.use(oe),e.use(L,"info",{render:(a,s)=>a[s].nesting===1?`<div class="callout callout-info">
`:`</div>
`}),e.use(L,"tip",{render:(a,s)=>a[s].nesting===1?`<div class="callout callout-tip">
`:`</div>
`}),e.use(L,"warning",{render:(a,s)=>a[s].nesting===1?`<div class="callout callout-warning">
`:`</div>
`}),e.use(L,"danger",{render:(a,s)=>a[s].nesting===1?`<div class="callout callout-danger">
`:`</div>
`}),e.renderer.rules.fence=(a,s)=>{const n=a[s],t=(n.info?n.info.trim():"").split(/\s+/g)[0];let u;if(t&&C.languages[t])try{u=C.highlight(n.content,C.languages[t],t)}catch(w){console.warn("Prism highlighting failed:",w),u=e.utils.escapeHtml(n.content)}else u=e.utils.escapeHtml(n.content);return`<pre><code class="hljs${t?` language-${t}`:""}">${u}</code></pre>`};const r=e.renderer.rules.link_open||function(a,s,n,p,t){return t.renderToken(a,s,n)};return e.renderer.rules.link_open=function(a,s,n,p,t){const u=a[s],v=u.attrGet("href");return v&&(v.startsWith("http")||v.startsWith("//"))&&(u.attrSet("target","_blank"),u.attrSet("rel","noopener noreferrer")),r(a,s,n,p,t)},e},H=re();function ae(e,r=""){if(console.log("🔄 processEnhancedMarkdown called with:",{contentLength:e.length,basePath:r,hasCallouts:e.includes(":::"),hasTaskLists:e.includes("- [ ]")||e.includes("- [x]"),hasCodeBlocks:e.includes("```"),contentPreview:e.substring(0,100)}),!e||e.trim()==="")return console.warn("⚠️ Empty content passed to processEnhancedMarkdown"),"";let a=e;r&&(a=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/gim,(n,p,t)=>{const u=t.startsWith("/")?`${r}${t}`:t.startsWith("http")?t:`${r}/${t}`;return`![${p}](${u})`})),console.log("🔧 About to render with markdown processor...");const s=H.render(a);return console.log("✅ Enhanced markdown processed:",{inputLength:a.length,resultLength:s.length,hasCalloutDivs:s.includes("callout-"),hasTaskListItems:s.includes("task-list-item"),hasHighlightedCode:s.includes('class="hljs'),hasAnyHTML:s.includes("<"),resultPreview:s.substring(0,200)}),(!s||s.trim()==="")&&console.error("❌ Markdown processor returned empty result!"),s}function ie(e){const r=H.parse(e,{}),a=[];return r.forEach(s=>{if(s.type==="heading_open"){const n=parseInt(s.tag.slice(1)),p=r[r.indexOf(s)+1];if(p&&p.type==="inline"){const t=p.content,u=t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim();a.push({id:u,text:t,level:n})}}}),a}const I=new O({html:!0,linkify:!0,typographer:!0,breaks:!0});function ce(e){if(console.log("🔄 processBasicMarkdown called with:",{contentLength:e.length,contentPreview:e.substring(0,100)}),!e||e.trim()==="")return console.warn("⚠️ Empty content passed to processBasicMarkdown"),"";const r=I.render(e);return console.log("✅ Basic markdown processed:",{inputLength:e.length,resultLength:r.length,hasAnyHTML:r.includes("<"),resultPreview:r.substring(0,200)}),r}function ue(e){console.log("🔄 processMarkdownWithManualCallouts called");let r=I.render(e);return r=r.replace(/:::\s*(info|tip|warning|danger)\s*\n([\s\S]*?)\n:::/g,(a,s,n)=>`<div class="callout callout-${s}">
${n}
</div>`),r=r.replace(/<li>- \[ \] (.*?)<\/li>/g,'<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled> $1</li>'),r=r.replace(/<li>- \[x\] (.*?)<\/li>/g,'<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked disabled> $1</li>'),console.log("✅ Manual callouts processed:",{hasCallouts:r.includes("callout-"),hasTaskLists:r.includes("task-list-item"),resultLength:r.length}),r}const de={class:"project-detail"},ge={class:"project-container"},pe={key:0,class:"loading-state"},he={key:1,class:"error-state"},ve={key:2},fe={class:"project-image"},ke=["src","alt"],me={class:"project-content"},we={class:"content-main"},ye={class:"project-links"},_e=["href"],be=["href"],je={class:"project-tags"},Me=["innerHTML"],Le={key:1,class:"content-loading"},Ce={class:"toc","aria-label":"Table of contents"},Te=["href","onClick"],$e={key:0,class:"related-projects"},xe={class:"related-grid grid grid-responsive"},Ee={class:"related-tags"},Pe=D({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(e,{emit:r}){const a=e,s=r,n=f(null),p=f([]),t=f(""),u=f([]),v=f(!1),w=f(null),y=f(),W=f();let _=null;const T=q(()=>!n.value||!p.value.length?[]:p.value.filter(l=>l.id!==n.value.id&&(l.category===n.value.category||l.tags.some(o=>n.value.tags.includes(o)))).slice(0,4)),F=l=>{if(!l)return"";if(l.startsWith("http"))return l;const o=window.location.hostname==="mrleemurray.github.io"?"/site":"";return l.startsWith("/")?`${o}${l}`:`${o}/${l}`},$=async()=>{console.log("🚀 loadProject called for slug:",a.slug),v.value=!0,w.value=null,n.value=null,t.value="",u.value=[],s("sticky-title-change",null);try{console.log("📥 Loading projects data...");const l=await B.loadProjectsData();p.value=l.projects,console.log("✅ Projects data loaded:",l.projects.length),console.log("📄 Loading project content for:",a.slug);const o=await B.loadProjectContent(a.slug);n.value=o.frontmatter,console.log("✅ Project frontmatter loaded:",n.value.title),console.log("📝 Raw content length:",o.content.length),console.log("📝 Content preview:",o.content.substring(0,200)),s("sticky-title-change",n.value.title);const h=window.location.hostname==="mrleemurray.github.io"?"/site":"";console.log("🔗 Base path:",h),console.log("⚙️ Trying enhanced markdown processor...");try{t.value=ae(o.content,h),console.log("✅ Enhanced markdown succeeded, length:",t.value.length)}catch(c){console.warn("⚠️ Enhanced markdown failed, trying manual callouts:",c);try{t.value=ue(o.content),console.log("✅ Manual callouts succeeded, length:",t.value.length)}catch(k){console.warn("⚠️ Manual callouts failed, trying basic markdown:",k),t.value=ce(o.content),console.log("✅ Basic markdown succeeded, length:",t.value.length)}}console.log("✅ Final markdown content length:",t.value.length),console.log("🎨 Final markdown preview:",t.value.substring(0,300)),u.value=ie(o.content),console.log("📚 TOC extracted:",u.value.length,"items"),await J(),console.log("🔍 Final markdown content check:",{hasCallouts:t.value.includes("callout-"),hasTaskLists:t.value.includes("task-list-item"),hasHTML:t.value.includes("<"),isEmpty:t.value.trim()===""}),setTimeout(()=>{R()},100)}catch(l){console.error("❌ Error loading project:",l),w.value=l instanceof Error?l.message:"Failed to load project"}finally{v.value=!1,console.log("🏁 loadProject completed")}};z(()=>a.slug,()=>{$()});const R=()=>{if(!y.value)return;const l=document.createElement("div");l.style.height="1px",l.style.position="absolute",l.style.top="calc(var(--space-16) - 7px)",l.style.left="0",l.style.right="0",l.style.pointerEvents="none",l.setAttribute("data-sticky-sentinel","true"),y.value.parentNode?.insertBefore(l,y.value),_=new IntersectionObserver(o=>{o.forEach(h=>{h.target===l&&(!h.isIntersecting&&n.value?.title?s("sticky-title-change",n.value.title):window.innerWidth<=767||s("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),_.observe(l)},N=()=>{_&&(_.disconnect(),_=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(o=>o.remove())},U=l=>{const o=document.getElementById(l);if(!o)return;const h=y.value?.offsetHeight||0,c=getComputedStyle(document.documentElement),V=(parseFloat(c.getPropertyValue("--space-16"))*16||64)-6+h+20,A=o.getBoundingClientRect().top+window.pageYOffset-V;window.scrollTo({top:A,behavior:"smooth"})};return G(()=>{$()}),Y(()=>{N()}),(l,o)=>{const h=K("router-link");return g(),d("div",de,[i("div",ge,[v.value?(g(),d("div",pe,[...o[0]||(o[0]=[i("div",{class:"loading-spinner"},null,-1),i("p",null,"Loading project...",-1)])])):w.value?(g(),d("div",he,[o[2]||(o[2]=i("h2",null,"Project Not Found",-1)),x(h,{to:"/",class:"btn btn-primary"},{default:E(()=>[...o[1]||(o[1]=[P(" ← Back to Projects ",-1)])]),_:1})])):n.value?(g(),d("div",ve,[i("div",fe,[i("img",{src:F(n.value.image),alt:n.value.title},null,8,ke)]),i("div",me,[i("div",we,[i("div",{ref_key:"projectMetaRef",ref:y,class:"project-meta"},[i("div",ye,[n.value.liveUrl?(g(),d("a",{key:0,href:n.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(n.value.liveUrlLabel||"View Live Site"),9,_e)):b("",!0),n.value.sourceUrl?(g(),d("a",{key:1,href:n.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(n.value.sourceUrlLabel||"View Source"),9,be)):b("",!0)]),i("div",je,[(g(!0),d(j,null,M(n.value.tags,c=>(g(),d("span",{key:c,class:"tag"},m(c),1))),128))])],512),t.value?(g(),d("div",{key:`markdown-${a.slug}-${t.value.length}`,class:"markdown-content",innerHTML:t.value},null,8,Me)):(g(),d("div",Le,[...o[3]||(o[3]=[i("p",null,"Loading project details...",-1)])]))]),u.value.length>0?(g(),d("aside",{key:0,ref_key:"tocRef",ref:W,class:"content-sidebar"},[i("nav",Ce,[o[4]||(o[4]=i("h3",null,"Table of Contents",-1)),i("ul",null,[(g(!0),d(j,null,M(u.value,c=>(g(),d("li",{key:c.id,class:Q(`toc-level-${c.level}`)},[i("a",{href:`#${c.id}`,onClick:X(k=>U(c.id),["prevent"])},m(c.text),9,Te)],2))),128))])])],512)):b("",!0)]),T.value.length>0?(g(),d("section",$e,[o[5]||(o[5]=i("h2",null,"Related Projects",-1)),i("div",xe,[(g(!0),d(j,null,M(T.value,c=>(g(),d("article",{key:c.id,class:"related-card"},[i("h3",null,[x(h,{to:`/projects/${c.id}`},{default:E(()=>[P(m(c.title),1)]),_:2},1032,["to"])]),i("p",null,m(c.description),1),i("div",Ee,[(g(!0),d(j,null,M(c.tags.slice(0,3),k=>(g(),d("span",{key:k,class:"tag"},m(k),1))),128))])]))),128))])])):b("",!0)])):b("",!0)])])}}}),We=Z(Pe,[["__scopeId","data-v-ac2cdfb6"]]);export{We as default};
