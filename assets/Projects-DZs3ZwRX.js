import{M as U,P as j,I as F}from"./image-optimizer-gEZLCt9p.js";import{d as K,r as l,c as C,w as Q,t as q,o as H,a as J,b as o,e as n,f as y,n as b,F as x,g as z,h as X,u as N,i as Y,j as s,k as O,l as B,m as Z,_ as ee}from"./index-Dav4kOLV.js";const te={class:"projects"},ae={class:"container"},oe={key:0,class:"loading-state"},se={key:1,class:"error-state"},re=["src","alt","onLoad","onError"],ne={class:"project-content"},ie={class:"project-title"},le={class:"project-description"},ce={class:"project-meta"},de={class:"project-tags"},ue={key:3,class:"empty-state"},ve={key:0},fe={key:1},me=K({__name:"Projects",props:{selectedCategory:{default:""},viewMode:{default:"grid"}},emits:["update-project-filters","update:selectedCategory"],setup(S,{emit:V}){const f=S,E=V,d=l(""),w=l([]),R=l([]),h=l(!1),m=l(null),g=l(!1),i=l({}),p=l("full"),_=C(()=>p.value),L=()=>{const e=document.documentElement.getAttribute("data-performance")||"full";e!==p.value&&(p.value=e)},k=()=>{g.value=window.innerWidth<=767},M=(e,a=!1)=>{if(!e)return"";if(e.startsWith("http"))return e;const r={viewMode:v.value,isMobile:g.value,isRetina:window.devicePixelRatio>1,preferAnimation:a};try{return F.getImageSrc(e,r)}catch(t){console.warn("Failed to get optimized image, falling back to original:",t);const c=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${c}${e}`:`${c}/${e}`}},u=e=>F.isGif(e),T=e=>!u(e)||_.value==="power-saver"?M(e,!1):M(e,!0),v=C(()=>g.value?"grid":f.viewMode);Q(p,(e,a)=>{e!==a&&w.value.forEach(r=>{u(r.image)&&(i.value[r.id]=!1,setTimeout(()=>{i.value[r.id]=!0},50))})});const W=(e,a)=>u(a)?`${e}-${_.value}`:e,$=C(()=>{let e=w.value;return f.selectedCategory&&(e=j.getProjectsByCategory(e,f.selectedCategory)),d.value&&(e=j.searchProjects(e,d.value)),j.sortProjects(e,"date")}),{selectedCategory:I}=q(f),A=()=>{d.value="",E("update:selectedCategory","")},D=e=>{i.value[e]=!0},G=e=>{i.value[e]=!0},P=async()=>{h.value=!0,m.value=null;try{const e=await U.loadProjectsData();w.value=e.projects,R.value=e.categories,i.value={},e.projects.forEach(a=>{i.value[a.id]=!1}),E("update-project-filters",{categories:e.categories})}catch(e){m.value="Failed to load projects. Please try again later.",console.error("Error loading projects:",e)}finally{h.value=!1}};return H(()=>{P(),k(),window.addEventListener("resize",k),L();const e=new MutationObserver(a=>{a.forEach(r=>{r.type==="attributes"&&r.attributeName==="data-performance"&&L()})});e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-performance"]}),window.__performanceModeObserver=e}),J(()=>{window.removeEventListener("resize",k);const e=window.__performanceModeObserver;e&&(e.disconnect(),delete window.__performanceModeObserver)}),(e,a)=>{const r=Y("router-link");return s(),o("div",te,[n("div",ae,[h.value?(s(),o("div",oe,[...a[0]||(a[0]=[n("p",null,"Loading projects...",-1)])])):m.value?(s(),o("div",se,[n("p",null,y(m.value),1),n("button",{onClick:P,class:"btn btn-primary"},"Try Again")])):$.value.length>0?(s(),o("div",{key:2,class:b(["projects-container",[v.value==="grid"?"projects-grid":"projects-list"]])},[(s(!0),o(x,null,z($.value,t=>(s(),o("article",{key:t.id,class:b(["project-card",{"project-card--list":v.value==="list","project-card--featured":t.featured&&v.value==="grid"||g.value&&v.value==="grid"}])},[n("div",{class:b(["project-image",{"image-loaded":i.value[t.id]}])},[O(r,{to:`/projects/${t.id}`},{default:B(()=>[(s(),o("img",{key:W(t.id,t.image),src:T(t.image),alt:t.title,class:b({loaded:i.value[t.id],"gif-static":u(t.image)&&_.value==="power-saver","gif-animated":u(t.image)&&_.value==="full"}),onLoad:c=>D(t.id),onError:c=>G(t.id),loading:"lazy"},null,42,re))]),_:2},1032,["to"])],2),n("div",ne,[n("h3",ie,[O(r,{to:`/projects/${t.id}`},{default:B(()=>[Z(y(t.title),1)]),_:2},1032,["to"])]),n("p",le,y(t.description),1),n("div",ce,[n("div",de,[(s(!0),o(x,null,z(t.tags,c=>(s(),o("span",{key:c,class:"tag"},y(c),1))),128))])])])],2))),128))],2)):(s(),o("div",ue,[a[1]||(a[1]=n("h3",null,"No projects found",-1)),d.value||N(I)?(s(),o("p",ve)):(s(),o("p",fe," Projects are coming soon! Check back later. ")),d.value||N(I)?(s(),o("button",{key:2,onClick:A,class:"btn btn-primary"}," Clear Filters ")):X("",!0)]))])])}}}),_e=ee(me,[["__scopeId","data-v-e9a6bcb3"]]);export{_e as default};
