import{d as N,r,c as R,m as F,o as D,a as I,b as n,e as s,h as p,k as T,w as x,f as c,F as m,g as k,i as $,j as l,n as A,p as q,l as L,_ as z}from"./index-Cdz21yNb.js";import{M as y}from"./projects-XJLeKt76.js";const W={class:"project-detail"},Y={class:"project-container"},G={key:0,class:"loading-state"},J={key:1,class:"error-state"},K={key:2},Q={class:"project-image"},X=["src","alt"],Z={class:"project-content"},ee={class:"content-main"},te={class:"project-links"},se=["href"],oe=["href"],ne={class:"project-tags"},le=["innerHTML"],ae={key:1,class:"content-loading"},re={class:"toc","aria-label":"Table of contents"},ie=["href","onClick"],ce={key:0,class:"related-projects"},ue={class:"related-grid grid grid-responsive"},de={class:"related-tags"},ve=N({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(O,{emit:P}){const w=O,f=P,o=r(null),h=r([]),g=r(""),_=r([]),j=r(!1),b=r(null),u=r(),S=r();let d=null;const C=R(()=>!o.value||!h.value.length?[]:h.value.filter(t=>t.id!==o.value.id&&(t.category===o.value.category||t.tags.some(e=>o.value.tags.includes(e)))).slice(0,4)),M=async()=>{j.value=!0,b.value=null,g.value="",_.value=[],f("sticky-title-change",null);try{const t=await y.loadProjectsData();h.value=t.projects;const e=await y.loadProjectContent(w.slug);o.value=e.frontmatter,f("sticky-title-change",o.value.title),g.value=y.parseMarkdownToHTML(e.content),_.value=y.extractTableOfContents(e.content),setTimeout(()=>{E()},100)}catch(t){b.value=t instanceof Error?t.message:"Failed to load project",console.error("Error loading project:",t)}finally{j.value=!1}};F(()=>w.slug,()=>{M()});const E=()=>{if(!u.value)return;const t=document.createElement("div");t.style.height="1px",t.style.position="absolute",t.style.top="calc(var(--space-16) - 7px)",t.style.left="0",t.style.right="0",t.style.pointerEvents="none",t.setAttribute("data-sticky-sentinel","true"),u.value.parentNode?.insertBefore(t,u.value),d=new IntersectionObserver(e=>{e.forEach(i=>{i.target===t&&(!i.isIntersecting&&o.value?.title?f("sticky-title-change",o.value.title):window.innerWidth<=767||f("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),d.observe(t)},B=()=>{d&&(d.disconnect(),d=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(e=>e.remove())},U=t=>{const e=document.getElementById(t);if(!e)return;const i=u.value?.offsetHeight||0,a=getComputedStyle(document.documentElement),V=(parseFloat(a.getPropertyValue("--space-16"))*16||64)-6+i+20,H=e.getBoundingClientRect().top+window.pageYOffset-V;window.scrollTo({top:H,behavior:"smooth"})};return D(()=>{M()}),I(()=>{B()}),(t,e)=>{const i=$("router-link");return l(),n("div",W,[s("div",Y,[j.value?(l(),n("div",G,[...e[0]||(e[0]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading project...",-1)])])):b.value?(l(),n("div",J,[e[2]||(e[2]=s("h2",null,"Project Not Found",-1)),T(i,{to:"/",class:"btn btn-primary"},{default:x(()=>[...e[1]||(e[1]=[L(" â† Back to Projects ",-1)])]),_:1})])):o.value?(l(),n("div",K,[s("div",Q,[s("img",{src:o.value.image,alt:o.value.title},null,8,X)]),s("div",Z,[s("div",ee,[s("div",{ref_key:"projectMetaRef",ref:u,class:"project-meta"},[s("div",te,[o.value.liveUrl?(l(),n("a",{key:0,href:o.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.liveUrlLabel||"View Live Site"),9,se)):p("",!0),o.value.sourceUrl?(l(),n("a",{key:1,href:o.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},c(o.value.sourceUrlLabel||"View Source"),9,oe)):p("",!0)]),s("div",ne,[(l(!0),n(m,null,k(o.value.tags,a=>(l(),n("span",{key:a,class:"tag"},c(a),1))),128))])],512),g.value?(l(),n("div",{key:0,class:"markdown-content",innerHTML:g.value},null,8,le)):(l(),n("div",ae,[...e[3]||(e[3]=[s("p",null,"Loading project details...",-1)])]))]),_.value.length>0?(l(),n("aside",{key:0,ref_key:"tocRef",ref:S,class:"content-sidebar"},[s("nav",re,[e[4]||(e[4]=s("h3",null,"Table of Contents",-1)),s("ul",null,[(l(!0),n(m,null,k(_.value,a=>(l(),n("li",{key:a.id,class:A(`toc-level-${a.level}`)},[s("a",{href:`#${a.id}`,onClick:q(v=>U(a.id),["prevent"])},c(a.text),9,ie)],2))),128))])])],512)):p("",!0)]),C.value.length>0?(l(),n("section",ce,[e[5]||(e[5]=s("h2",null,"Related Projects",-1)),s("div",ue,[(l(!0),n(m,null,k(C.value,a=>(l(),n("article",{key:a.id,class:"related-card"},[s("h3",null,[T(i,{to:`/projects/${a.id}`},{default:x(()=>[L(c(a.title),1)]),_:2},1032,["to"])]),s("p",null,c(a.description),1),s("div",de,[(l(!0),n(m,null,k(a.tags.slice(0,3),v=>(l(),n("span",{key:v,class:"tag"},c(v),1))),128))])]))),128))])])):p("",!0)])):p("",!0)])])}}}),ke=z(ve,[["__scopeId","data-v-54eda719"]]);export{ke as default};
