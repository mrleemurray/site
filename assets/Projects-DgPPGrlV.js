import{M as D,P as C}from"./projects-CDZw7toM.js";import{d as U,r as f,c as F,t as H,o as Q,a as q,b as i,e as l,f as $,n as w,F as I,g as W,h as J,u as A,i as K,j as c,k as B,w as G,l as X,_ as Y}from"./index-BML3zWpK.js";class N{static getThumbnailPath(t,a){if(!t)return"";if(t.startsWith("http"))return t;const o=t.split("/"),r=o[o.length-1],m=r.split(".")[0],k=r.split(".").pop()?.toLowerCase(),v=o[o.length-2]||"";let u="grid";return a.isMobile?u="small":a.viewMode==="list"?u="list":u="grid",k==="gif"?a.preferAnimation?t:`/images/thumbnails/${v}/${m}-${u}-static.jpg`:`/images/thumbnails/${v}/${m}-${u}.jpg`}static getBasePath(){return window.location.hostname==="mrleemurray.github.io"?"/site":""}static getImageSrc(t,a){if(!t)return"";if(t.startsWith("http"))return t;const o=this.getBasePath();if(a){const r=this.getThumbnailPath(t,a);return r.startsWith("/")?`${o}${r}`:`${o}/${r}`}return t.startsWith("/")?`${o}${t}`:`${o}/${t}`}static createImageWithFallback(t,a){const o={primary:this.getImageSrc(t,a),fallback:this.getImageSrc(t)};if(t.split(".").pop()?.toLowerCase()==="gif"){const m={...a,preferAnimation:!0};o.animated=this.getImageSrc(t,m)}return o}static preloadImage(t){return new Promise((a,o)=>{const r=new Image;r.onload=()=>a(),r.onerror=o,r.src=t})}static getResponsiveSrcSet(t,a){const o=this.getBasePath(),r=this.getThumbnailPath(t,a);return`${o}${r}`}static async checkThumbnailExists(t,a){try{const o=this.getImageSrc(t,a);return(await fetch(o,{method:"HEAD"})).ok}catch{return!1}}static isGif(t){return t.toLowerCase().endsWith(".gif")}static getGifSrc(t,a,o=!1){if(!this.isGif(t))return this.getImageSrc(t,a);const r={...a,preferAnimation:!o};return this.getImageSrc(t,r)}}const Z={class:"projects"},ee={class:"container"},te={key:0,class:"loading-state"},se={key:1,class:"error-state"},ae=["onMouseenter","onMouseleave"],oe=["src","alt","onLoad","onError"],re={class:"project-content"},ne={class:"project-title"},ie={class:"project-description"},le={class:"project-meta"},ce={class:"project-tags"},ue={key:3,class:"empty-state"},de={key:0},fe={key:1},me=U({__name:"Projects",props:{selectedCategory:{default:""},viewMode:{default:"grid"}},emits:["update-project-filters","update:selectedCategory"],setup(S,{emit:t}){const a=S,o=t,r=f(""),m=f([]),k=f([]),v=f(!1),u=f(null),p=f(!1),g=f({}),h=f({}),M=()=>{p.value=window.innerWidth<=767},E=(e,n=!1)=>{if(!e)return"";if(e.startsWith("http"))return e;const y={viewMode:_.value,isMobile:p.value,isRetina:window.devicePixelRatio>1,preferAnimation:n};try{return N.getImageSrc(e,y)}catch(s){console.warn("Failed to get optimized image, falling back to original:",s);const d=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${d}${e}`:`${d}/${e}`}},P=e=>E(e,!0),b=e=>N.isGif(e),z=(e,n)=>{b(n)&&(console.log(`Mouse enter on GIF: ${e}, path: ${n}`),h.value[e]=!0,console.log(`Animation state set to true for ${e}`))},T=(e,n)=>{b(n)&&(console.log(`Mouse leave on GIF: ${e}, path: ${n}`),h.value[e]=!1,console.log(`Animation state set to false for ${e}`))},_=F(()=>p.value?"grid":a.viewMode),L=F(()=>{let e=m.value;return a.selectedCategory&&(e=C.getProjectsByCategory(e,a.selectedCategory)),r.value&&(e=C.searchProjects(e,r.value)),C.sortProjects(e,"date")}),{selectedCategory:j}=H(a),V=()=>{r.value="",o("update:selectedCategory","")},O=e=>{g.value[e]=!0},R=e=>{g.value[e]=!0},x=async()=>{v.value=!0,u.value=null;try{const e=await D.loadProjectsData();m.value=e.projects,k.value=e.categories,g.value={},h.value={},e.projects.forEach(n=>{g.value[n.id]=!1,h.value[n.id]=!1}),o("update-project-filters",{categories:e.categories})}catch(e){u.value="Failed to load projects. Please try again later.",console.error("Error loading projects:",e)}finally{v.value=!1}};return Q(()=>{x(),M(),window.addEventListener("resize",M)}),q(()=>{window.removeEventListener("resize",M)}),(e,n)=>{const y=K("router-link");return c(),i("div",Z,[l("div",ee,[v.value?(c(),i("div",te,[...n[0]||(n[0]=[l("p",null,"Loading projects...",-1)])])):u.value?(c(),i("div",se,[l("p",null,$(u.value),1),l("button",{onClick:x,class:"btn btn-primary"},"Try Again")])):L.value.length>0?(c(),i("div",{key:2,class:w(["projects-container",[_.value==="grid"?"projects-grid":"projects-list"]])},[(c(!0),i(I,null,W(L.value,s=>(c(),i("article",{key:s.id,class:w(["project-card",{"project-card--list":_.value==="list","project-card--featured":s.featured&&_.value==="grid"||p.value&&_.value==="grid"}])},[l("div",{class:w(["project-image",{"image-loaded":g.value[s.id]}]),onMouseenter:d=>z(s.id,s.image),onMouseleave:d=>T(s.id,s.image)},[B(y,{to:`/projects/${s.id}`},{default:G(()=>[l("img",{src:h.value[s.id]&&b(s.image)?P(s.image):E(s.image),alt:s.title,class:w({loaded:g.value[s.id],"gif-animated":h.value[s.id]&&b(s.image)}),onLoad:d=>O(s.id),onError:d=>R(s.id),loading:"lazy"},null,42,oe)]),_:2},1032,["to"])],42,ae),l("div",re,[l("h3",ne,[B(y,{to:`/projects/${s.id}`},{default:G(()=>[X($(s.title),1)]),_:2},1032,["to"])]),l("p",ie,$(s.description),1),l("div",le,[l("div",ce,[(c(!0),i(I,null,W(s.tags,d=>(c(),i("span",{key:d,class:"tag"},$(d),1))),128))])])])],2))),128))],2)):(c(),i("div",ue,[n[1]||(n[1]=l("h3",null,"No projects found",-1)),r.value||A(j)?(c(),i("p",de)):(c(),i("p",fe," Projects are coming soon! Check back later. ")),r.value||A(j)?(c(),i("button",{key:2,onClick:V,class:"btn btn-primary"}," Clear Filters ")):J("",!0)]))])])}}}),he=Y(me,[["__scopeId","data-v-0ca80ca3"]]);export{he as default};
