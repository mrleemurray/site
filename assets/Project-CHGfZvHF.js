import{d as D,r as h,c as F,m as A,o as q,a as z,b as i,e as a,h as b,k as x,w as S,f as m,F as j,g as C,i as G,j as c,n as Y,p as J,l as E,_ as K}from"./index-BLCRriVj.js";import{a as Q,b as O,m as X,f as Z,c as ee,i as te,d as se,e as ne,g as L,h as T,M as I}from"./projects-BeE_umKb.js";const oe=()=>{const s=new Q({html:!0,linkify:!0,typographer:!0,breaks:!0});s.use(O,{permalink:O.permalink.headerLink()}),s.use(X,{includeLevel:[1,2,3,4],containerClass:"table-of-contents",listType:"ul"}),s.use(Z),s.use(ee,{enabled:!0}),s.use(te),s.use(se),s.use(ne),s.use(L,"info",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-info">
`:`</div>
`}),s.use(L,"tip",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-tip">
`:`</div>
`}),s.use(L,"warning",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-warning">
`:`</div>
`}),s.use(L,"danger",{render:(r,n)=>r[n].nesting===1?`<div class="callout callout-danger">
`:`</div>
`}),s.renderer.rules.fence=(r,n)=>{const e=r[n],l=(e.info?e.info.trim():"").split(/\s+/g)[0];let u;if(l&&T.languages[l])try{u=T.highlight(e.content,T.languages[l],l)}catch(k){console.warn("Prism highlighting failed:",k),u=s.utils.escapeHtml(e.content)}else u=s.utils.escapeHtml(e.content);return`<pre><code class="hljs${l?` language-${l}`:""}">${u}</code></pre>`};const g=s.renderer.rules.link_open||function(r,n,e,p,l){return l.renderToken(r,n,e)};return s.renderer.rules.link_open=function(r,n,e,p,l){const u=r[n],v=u.attrGet("href");return v&&(v.startsWith("http")||v.startsWith("//"))&&(u.attrSet("target","_blank"),u.attrSet("rel","noopener noreferrer")),g(r,n,e,p,l)},s},P=oe();function le(s,g=""){console.log("ðŸ”„ Processing enhanced markdown...",{hasCallouts:s.includes(":::"),hasTaskLists:s.includes("- [ ]")||s.includes("- [x]"),hasCodeBlocks:s.includes("```"),contentLength:s.length});let r=s;g&&(r=s.replace(/!\[([^\]]*)\]\(([^)]+)\)/gim,(e,p,l)=>{const u=l.startsWith("/")?`${g}${l}`:l.startsWith("http")?l:`${g}/${l}`;return`![${p}](${u})`}));const n=P.render(r);return console.log("âœ… Enhanced markdown processed",{resultLength:n.length,hasCalloutDivs:n.includes("callout-"),hasTaskListItems:n.includes("task-list-item"),hasHighlightedCode:n.includes('class="hljs')}),n}function re(s){const g=P.parse(s,{}),r=[];return g.forEach(n=>{if(n.type==="heading_open"){const e=parseInt(n.tag.slice(1)),p=g[g.indexOf(n)+1];if(p&&p.type==="inline"){const l=p.content,u=l.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim();r.push({id:u,text:l,level:e})}}}),r}const ae={class:"project-detail"},ie={class:"project-container"},ce={key:0,class:"loading-state"},ue={key:1,class:"error-state"},de={key:2},pe={class:"project-image"},ge=["src","alt"],fe={class:"project-content"},ve={class:"content-main"},he={class:"project-links"},me=["href"],ke=["href"],_e={class:"project-tags"},ye=["innerHTML"],we={key:1,class:"content-loading"},be={class:"toc","aria-label":"Table of contents"},je=["href","onClick"],Ce={key:0,class:"related-projects"},Le={class:"related-grid grid grid-responsive"},Te={class:"related-tags"},$e=D({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(s,{emit:g}){const r=s,n=g,e=h(null),p=h([]),l=h(""),u=h([]),v=h(!1),k=h(null),_=h(),B=h();let y=null;const $=F(()=>!e.value||!p.value.length?[]:p.value.filter(t=>t.id!==e.value.id&&(t.category===e.value.category||t.tags.some(o=>e.value.tags.includes(o)))).slice(0,4)),H=t=>{if(!t)return"";if(t.startsWith("http"))return t;const o=window.location.hostname==="mrleemurray.github.io"?"/site":"";return t.startsWith("/")?`${o}${t}`:`${o}/${t}`},M=async()=>{v.value=!0,k.value=null,e.value=null,l.value="",u.value=[],n("sticky-title-change",null);try{const t=await I.loadProjectsData();p.value=t.projects;const o=await I.loadProjectContent(r.slug);e.value=o.frontmatter,n("sticky-title-change",e.value.title);const f=window.location.hostname==="mrleemurray.github.io"?"/site":"";l.value=le(o.content,f),u.value=re(o.content),setTimeout(()=>{N()},100)}catch(t){k.value=t instanceof Error?t.message:"Failed to load project",console.error("Error loading project:",t)}finally{v.value=!1}};A(()=>r.slug,()=>{M()});const N=()=>{if(!_.value)return;const t=document.createElement("div");t.style.height="1px",t.style.position="absolute",t.style.top="calc(var(--space-16) - 7px)",t.style.left="0",t.style.right="0",t.style.pointerEvents="none",t.setAttribute("data-sticky-sentinel","true"),_.value.parentNode?.insertBefore(t,_.value),y=new IntersectionObserver(o=>{o.forEach(f=>{f.target===t&&(!f.isIntersecting&&e.value?.title?n("sticky-title-change",e.value.title):window.innerWidth<=767||n("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),y.observe(t)},R=()=>{y&&(y.disconnect(),y=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(o=>o.remove())},U=t=>{const o=document.getElementById(t);if(!o)return;const f=_.value?.offsetHeight||0,d=getComputedStyle(document.documentElement),V=(parseFloat(d.getPropertyValue("--space-16"))*16||64)-6+f+20,W=o.getBoundingClientRect().top+window.pageYOffset-V;window.scrollTo({top:W,behavior:"smooth"})};return q(()=>{M()}),z(()=>{R()}),(t,o)=>{const f=G("router-link");return c(),i("div",ae,[a("div",ie,[v.value?(c(),i("div",ce,[...o[0]||(o[0]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading project...",-1)])])):k.value?(c(),i("div",ue,[o[2]||(o[2]=a("h2",null,"Project Not Found",-1)),x(f,{to:"/",class:"btn btn-primary"},{default:S(()=>[...o[1]||(o[1]=[E(" â† Back to Projects ",-1)])]),_:1})])):e.value?(c(),i("div",de,[a("div",pe,[a("img",{src:H(e.value.image),alt:e.value.title},null,8,ge)]),a("div",fe,[a("div",ve,[a("div",{ref_key:"projectMetaRef",ref:_,class:"project-meta"},[a("div",he,[e.value.liveUrl?(c(),i("a",{key:0,href:e.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(e.value.liveUrlLabel||"View Live Site"),9,me)):b("",!0),e.value.sourceUrl?(c(),i("a",{key:1,href:e.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(e.value.sourceUrlLabel||"View Source"),9,ke)):b("",!0)]),a("div",_e,[(c(!0),i(j,null,C(e.value.tags,d=>(c(),i("span",{key:d,class:"tag"},m(d),1))),128))])],512),l.value?(c(),i("div",{key:0,class:"markdown-content",innerHTML:l.value},null,8,ye)):(c(),i("div",we,[...o[3]||(o[3]=[a("p",null,"Loading project details...",-1)])]))]),u.value.length>0?(c(),i("aside",{key:0,ref_key:"tocRef",ref:B,class:"content-sidebar"},[a("nav",be,[o[4]||(o[4]=a("h3",null,"Table of Contents",-1)),a("ul",null,[(c(!0),i(j,null,C(u.value,d=>(c(),i("li",{key:d.id,class:Y(`toc-level-${d.level}`)},[a("a",{href:`#${d.id}`,onClick:J(w=>U(d.id),["prevent"])},m(d.text),9,je)],2))),128))])])],512)):b("",!0)]),$.value.length>0?(c(),i("section",Ce,[o[5]||(o[5]=a("h2",null,"Related Projects",-1)),a("div",Le,[(c(!0),i(j,null,C($.value,d=>(c(),i("article",{key:d.id,class:"related-card"},[a("h3",null,[x(f,{to:`/projects/${d.id}`},{default:S(()=>[E(m(d.title),1)]),_:2},1032,["to"])]),a("p",null,m(d.description),1),a("div",Te,[(c(!0),i(j,null,C(d.tags.slice(0,3),w=>(c(),i("span",{key:w,class:"tag"},m(w),1))),128))])]))),128))])])):b("",!0)])):b("",!0)])])}}}),Ie=K($e,[["__scopeId","data-v-2d501d09"]]);export{Ie as default};
