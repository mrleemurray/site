import{M as U,P as E}from"./projects-BDukN6dN.js";import{d as H,r as v,c as S,w as K,t as Q,o as q,a as J,b as i,e as u,f as k,n as $,F as P,g as W,h as X,u as N,i as Y,j as c,k as O,l as T,m as Z,_ as ee}from"./index-CEQzlZT6.js";class z{static getThumbnailPath(t,s){if(!t)return"";if(t.startsWith("http"))return t;const r=t.split("/"),a=r[r.length-1],m=a.split(".")[0],M=a.split(".").pop()?.toLowerCase(),g=r[r.length-2]||"";let d="grid";return s.isMobile?d="small":s.viewMode==="list"?d="list":d="grid",M==="gif"?s.preferAnimation?t:`/images/thumbnails/${g}/${m}-${d}-static.jpg`:`/images/thumbnails/${g}/${m}-${d}.jpg`}static getBasePath(){return window.location.hostname==="mrleemurray.github.io"?"/site":""}static getImageSrc(t,s){if(!t)return"";if(t.startsWith("http"))return t;const r=this.getBasePath();if(s){const a=this.getThumbnailPath(t,s);return a.startsWith("/")?`${r}${a}`:`${r}/${a}`}return t.startsWith("/")?`${r}${t}`:`${r}/${t}`}static createImageWithFallback(t,s){const r={primary:this.getImageSrc(t,s),fallback:this.getImageSrc(t)};if(t.split(".").pop()?.toLowerCase()==="gif"){const m={...s,preferAnimation:!0};r.animated=this.getImageSrc(t,m)}return r}static preloadImage(t){return new Promise((s,r)=>{const a=new Image;a.onload=()=>s(),a.onerror=r,a.src=t})}static getResponsiveSrcSet(t,s){const r=this.getBasePath(),a=this.getThumbnailPath(t,s);return`${r}${a}`}static async checkThumbnailExists(t,s){try{const r=this.getImageSrc(t,s);return(await fetch(r,{method:"HEAD"})).ok}catch{return!1}}static isGif(t){return t.toLowerCase().endsWith(".gif")}static getGifSrc(t,s,r=!1){if(!this.isGif(t))return this.getImageSrc(t,s);const a={...s,preferAnimation:!r};return this.getImageSrc(t,a)}}const te={class:"projects"},se={class:"container"},re={key:0,class:"loading-state"},ae={key:1,class:"error-state"},oe=["src","alt","onLoad","onError"],ne={class:"project-content"},ie={class:"project-title"},ce={class:"project-description"},le={class:"project-meta"},ue={class:"project-tags"},de={key:3,class:"empty-state"},fe={key:0},me={key:1},ve=H({__name:"Projects",props:{selectedCategory:{default:""},viewMode:{default:"grid"}},emits:["update-project-filters","update:selectedCategory"],setup(L,{emit:t}){const s=L,r=t,a=v(""),m=v([]),M=v([]),g=v(!1),d=v(null),h=v(!1),f=v({}),w=v("full"),y=S(()=>w.value),x=()=>{const e=document.documentElement.getAttribute("data-performance")||"full";e!==w.value&&(w.value=e)},j=()=>{h.value=window.innerWidth<=767},C=(e,n=!1)=>{if(!e)return"";if(e.startsWith("http"))return e;const l={viewMode:_.value,isMobile:h.value,isRetina:window.devicePixelRatio>1,preferAnimation:n};try{return z.getImageSrc(e,l)}catch(o){console.warn("Failed to get optimized image, falling back to original:",o);const p=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${p}${e}`:`${p}/${e}`}},b=e=>z.isGif(e),A=e=>!b(e)||y.value==="power-saver"?C(e,!1):C(e,!0),_=S(()=>h.value?"grid":s.viewMode);K(w,(e,n)=>{e!==n&&m.value.forEach(l=>{b(l.image)&&(f.value[l.id]=!1,setTimeout(()=>{f.value[l.id]=!0},50))})});const G=(e,n)=>b(n)?`${e}-${y.value}`:e,B=S(()=>{let e=m.value;return s.selectedCategory&&(e=E.getProjectsByCategory(e,s.selectedCategory)),a.value&&(e=E.searchProjects(e,a.value)),E.sortProjects(e,"date")}),{selectedCategory:F}=Q(s),V=()=>{a.value="",r("update:selectedCategory","")},R=e=>{f.value[e]=!0},D=e=>{f.value[e]=!0},I=async()=>{g.value=!0,d.value=null;try{const e=await U.loadProjectsData();m.value=e.projects,M.value=e.categories,f.value={},e.projects.forEach(n=>{f.value[n.id]=!1}),r("update-project-filters",{categories:e.categories})}catch(e){d.value="Failed to load projects. Please try again later.",console.error("Error loading projects:",e)}finally{g.value=!1}};return q(()=>{I(),j(),window.addEventListener("resize",j),x();const e=new MutationObserver(n=>{n.forEach(l=>{l.type==="attributes"&&l.attributeName==="data-performance"&&x()})});e.observe(document.documentElement,{attributes:!0,attributeFilter:["data-performance"]}),window.__performanceModeObserver=e}),J(()=>{window.removeEventListener("resize",j);const e=window.__performanceModeObserver;e&&(e.disconnect(),delete window.__performanceModeObserver)}),(e,n)=>{const l=Y("router-link");return c(),i("div",te,[u("div",se,[g.value?(c(),i("div",re,[...n[0]||(n[0]=[u("p",null,"Loading projects...",-1)])])):d.value?(c(),i("div",ae,[u("p",null,k(d.value),1),u("button",{onClick:I,class:"btn btn-primary"},"Try Again")])):B.value.length>0?(c(),i("div",{key:2,class:$(["projects-container",[_.value==="grid"?"projects-grid":"projects-list"]])},[(c(!0),i(P,null,W(B.value,o=>(c(),i("article",{key:o.id,class:$(["project-card",{"project-card--list":_.value==="list","project-card--featured":o.featured&&_.value==="grid"||h.value&&_.value==="grid"}])},[u("div",{class:$(["project-image",{"image-loaded":f.value[o.id]}])},[O(l,{to:`/projects/${o.id}`},{default:T(()=>[(c(),i("img",{key:G(o.id,o.image),src:A(o.image),alt:o.title,class:$({loaded:f.value[o.id],"gif-static":b(o.image)&&y.value==="power-saver","gif-animated":b(o.image)&&y.value==="full"}),onLoad:p=>R(o.id),onError:p=>D(o.id),loading:"lazy"},null,42,oe))]),_:2},1032,["to"])],2),u("div",ne,[u("h3",ie,[O(l,{to:`/projects/${o.id}`},{default:T(()=>[Z(k(o.title),1)]),_:2},1032,["to"])]),u("p",ce,k(o.description),1),u("div",le,[u("div",ue,[(c(!0),i(P,null,W(o.tags,p=>(c(),i("span",{key:p,class:"tag"},k(p),1))),128))])])])],2))),128))],2)):(c(),i("div",de,[n[1]||(n[1]=u("h3",null,"No projects found",-1)),a.value||N(F)?(c(),i("p",fe)):(c(),i("p",me," Projects are coming soon! Check back later. ")),a.value||N(F)?(c(),i("button",{key:2,onClick:V,class:"btn btn-primary"}," Clear Filters ")):X("",!0)]))])])}}}),he=ee(ve,[["__scopeId","data-v-e9a6bcb3"]]);export{he as default};
