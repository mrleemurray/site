import{d as I,r as p,c as A,m as D,o as q,a as z,b as a,e as l,h as _,k as P,w as O,f as m,F as y,g as w,p as Y,i as G,j as r,n as J,q as K,l as E,_ as Q}from"./index-DO87ZdeB.js";import{M as B}from"./projects-gMhv-rLT.js";const X={class:"project-detail"},Z={class:"project-container"},ee={key:0,class:"loading-state"},te={key:1,class:"error-state"},le={key:2},se={class:"project-image"},oe=["src","alt"],ne={class:"project-content"},ae={class:"content-main"},re={class:"project-links"},ce=["href"],ie=["href"],ue={class:"project-tags"},de=["innerHTML"],pe={key:1,class:"content-loading"},ge={class:"toc","aria-label":"Table of contents"},ve=["href","onClick"],me={key:0,class:"related-projects"},fe={class:"related-grid grid grid-responsive"},he={class:"related-tags"},ke=I({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(F,{emit:R}){const f=F,$=R,s=p(null),j=p([]),d=p(""),g=p([]),b=p(!1),C=p(null),h=p(),U=p();let k=null;const x=A(()=>!s.value||!j.value.length?[]:j.value.filter(e=>e.id!==s.value.id&&(e.category===s.value.category||e.tags.some(t=>s.value.tags.includes(t)))).slice(0,4)),V=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=window.location.hostname==="mrleemurray.github.io"?"/site":"";return e.startsWith("/")?`${t}${e}`:`${t}/${e}`},S=async()=>{console.log("üöÄ loadProject called for slug:",f.slug),b.value=!0,C.value=null,s.value=null,d.value="",g.value=[],$("sticky-title-change",null);try{console.log("üì• Loading projects data...");const e=await B.loadProjectsData();j.value=e.projects,console.log("‚úÖ Projects data loaded:",e.projects.length),console.log("üìÑ Loading project content for:",f.slug);const t=await B.loadProjectContent(f.slug);s.value=t.frontmatter,console.log("‚úÖ Project frontmatter loaded:",s.value.title),console.log("üìù Raw content length:",t.content.length),console.log("üìù Content preview:",t.content.substring(0,200)),$("sticky-title-change",s.value.title);const u=window.location.hostname==="mrleemurray.github.io"?"/site":"";console.log("üîó Base path:",u),console.log("‚öôÔ∏è Processing markdown with fallback approach...");let o=t.content;u&&(o=t.content.replace(/!\[([^\]]*)\]\(([^)]+)\)/gim,(c,n,i)=>{const L=i.startsWith("/")?`${u}${i}`:i.startsWith("http")?i:`${u}/${i}`;return`![${n}](${L})`}));const v=t.content.matchAll(/^(#{1,6})\s+(.*)$/gm),M=Array.from(v).map(c=>{const n=c[1].length,i=c[2].trim(),L=i.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");return{level:n,text:i,id:L}});g.value=M,console.log("üìö TOC extracted:",g.value.length,"items"),g.value.length>0&&console.log("üìö TOC items:",g.value);let T=o.replace(/^### (.*$)/gim,(c,n)=>`<h3 id="${n.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}">${n}</h3>`).replace(/^## (.*$)/gim,(c,n)=>`<h2 id="${n.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}">${n}</h2>`).replace(/^# (.*$)/gim,(c,n)=>`<h1 id="${n.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}">${n}</h1>`).replace(/\*\*\*(.*?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/::: info\n([\s\S]*?)\n:::/g,'<div class="callout callout-info"><p>$1</p></div>').replace(/::: tip\n([\s\S]*?)\n:::/g,'<div class="callout callout-tip"><p>$1</p></div>').replace(/::: warning\n([\s\S]*?)\n:::/g,'<div class="callout callout-warning"><p>$1</p></div>').replace(/::: danger\n([\s\S]*?)\n:::/g,'<div class="callout callout-danger"><p>$1</p></div>').replace(/^- \[ \] (.*)$/gm,'<li class="task-list-item"><input type="checkbox" disabled> $1</li>').replace(/^- \[x\] (.*)$/gm,'<li class="task-list-item"><input type="checkbox" checked disabled> $1</li>').replace(/==(.*?)==/g,"<mark>$1</mark>").replace(/\+\+(.*?)\+\+/g,"<ins>$1</ins>").replace(/```(\w+)?\n([\s\S]*?)```/g,'<pre><code class="hljs language-$1">$2</code></pre>').replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img alt="$1" src="$2" />').replace(/^- (.*)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)(\n<li>.*<\/li>)*/g,c=>"<ul>"+c.replace(/\n/g,"")+"</ul>").replace(/(<li class="task-list-item">.*<\/li>)(\n<li class="task-list-item">.*<\/li>)*/g,c=>"<ul>"+c.replace(/\n/g,"")+"</ul>").split(`

`).map(c=>{const n=c.trim();return n===""?"":n.startsWith("<")?n:`<p>${n}</p>`}).filter(c=>c!=="").join(`
`);d.value=T,console.log("‚úÖ Manual markdown processing complete, length:",d.value.length),console.log("üé® Final content preview:",d.value.substring(0,300)),await Y(),console.log("üîç Final markdown content check:",{hasCallouts:d.value.includes("callout-"),hasTaskLists:d.value.includes("task-list-item"),hasHTML:d.value.includes("<"),isEmpty:d.value.trim()===""}),setTimeout(()=>{H()},100)}catch(e){console.error("‚ùå Error loading project:",e),C.value=e instanceof Error?e.message:"Failed to load project"}finally{b.value=!1,console.log("üèÅ loadProject completed")}};D(()=>f.slug,()=>{S()});const H=()=>{if(!h.value)return;const e=document.createElement("div");e.style.height="1px",e.style.position="absolute",e.style.top="calc(var(--space-16) - 7px)",e.style.left="0",e.style.right="0",e.style.pointerEvents="none",e.setAttribute("data-sticky-sentinel","true"),h.value.parentNode?.insertBefore(e,h.value),k=new IntersectionObserver(t=>{t.forEach(u=>{u.target===e&&(!u.isIntersecting&&s.value?.title?$("sticky-title-change",s.value.title):window.innerWidth<=767||$("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),k.observe(e)},N=()=>{k&&(k.disconnect(),k=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(t=>t.remove())},W=e=>{const t=document.getElementById(e);if(!t)return;const u=h.value?.offsetHeight||0,o=getComputedStyle(document.documentElement),c=(parseFloat(o.getPropertyValue("--space-16"))*16||64)-6+u+20,i=t.getBoundingClientRect().top+window.pageYOffset-c;window.scrollTo({top:i,behavior:"smooth"})};return q(()=>{S()}),z(()=>{N()}),(e,t)=>{const u=G("router-link");return r(),a("div",X,[l("div",Z,[b.value?(r(),a("div",ee,[...t[0]||(t[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading project...",-1)])])):C.value?(r(),a("div",te,[t[2]||(t[2]=l("h2",null,"Project Not Found",-1)),P(u,{to:"/",class:"btn btn-primary"},{default:O(()=>[...t[1]||(t[1]=[E(" ‚Üê Back to Projects ",-1)])]),_:1})])):s.value?(r(),a("div",le,[l("div",se,[l("img",{src:V(s.value.image),alt:s.value.title},null,8,oe)]),l("div",ne,[l("div",ae,[l("div",{ref_key:"projectMetaRef",ref:h,class:"project-meta"},[l("div",re,[s.value.liveUrl?(r(),a("a",{key:0,href:s.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(s.value.liveUrlLabel||"View Live Site"),9,ce)):_("",!0),s.value.sourceUrl?(r(),a("a",{key:1,href:s.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(s.value.sourceUrlLabel||"View Source"),9,ie)):_("",!0)]),l("div",ue,[(r(!0),a(y,null,w(s.value.tags,o=>(r(),a("span",{key:o,class:"tag"},m(o),1))),128))])],512),d.value?(r(),a("div",{key:`markdown-${f.slug}-${d.value.length}`,class:"markdown-content",innerHTML:d.value},null,8,de)):(r(),a("div",pe,[...t[3]||(t[3]=[l("p",null,"Loading project details...",-1)])]))]),g.value.length>0?(r(),a("aside",{key:0,ref_key:"tocRef",ref:U,class:"content-sidebar"},[l("nav",ge,[t[4]||(t[4]=l("h3",null,"Table of Contents",-1)),l("ul",null,[(r(!0),a(y,null,w(g.value,o=>(r(),a("li",{key:o.id,class:J(`toc-level-${o.level}`)},[l("a",{href:`#${o.id}`,onClick:K(v=>W(o.id),["prevent"])},m(o.text),9,ve)],2))),128))])])],512)):_("",!0)]),x.value.length>0?(r(),a("section",me,[t[5]||(t[5]=l("h2",null,"Related Projects",-1)),l("div",fe,[(r(!0),a(y,null,w(x.value,o=>(r(),a("article",{key:o.id,class:"related-card"},[l("h3",null,[P(u,{to:`/projects/${o.id}`},{default:O(()=>[E(m(o.title),1)]),_:2},1032,["to"])]),l("p",null,m(o.description),1),l("div",he,[(r(!0),a(y,null,w(o.tags.slice(0,3),v=>(r(),a("span",{key:v,class:"tag"},m(v),1))),128))])]))),128))])])):_("",!0)])):_("",!0)])])}}}),ye=Q(ke,[["__scopeId","data-v-426232c9"]]);export{ye as default};
