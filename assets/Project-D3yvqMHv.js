import{d as N,r as i,c as R,m as D,o as F,a as I,b as n,e as o,h as p,k as L,w as S,l as d,f as a,F as _,g as j,i as z,j as l,n as W,p as A,_ as q}from"./index-DYeCFbsU.js";import{M as b}from"./projects-THheSD1L.js";const G={class:"project-detail"},Y={class:"project-container"},J={key:0,class:"loading-state"},K={key:1,class:"error-state"},Q={key:2,style:{position:"fixed",top:"10px",right:"10px",background:"red",color:"white",padding:"10px","z-index":"9999","font-size":"12px"}},X={key:3},Z={class:"project-image"},ee=["src","alt"],te={class:"project-content"},oe={class:"content-main"},se={class:"project-links"},ne=["href"],le=["href"],re={class:"project-tags"},ae=["innerHTML"],ie={key:1,class:"content-loading"},ce={class:"toc","aria-label":"Table of contents"},ue=["href","onClick"],de={key:0,class:"related-projects"},ve={class:"related-grid grid grid-responsive"},pe={class:"related-tags"},fe=N({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(T,{emit:E}){const x=T,y=E,s=i(null),w=i([]),c=i(""),h=i([]),v=i(!1),f=i(null),g=i(),O=i();let k=null;const M=R(()=>!s.value||!w.value.length?[]:w.value.filter(t=>t.id!==s.value.id&&(t.category===s.value.category||t.tags.some(e=>s.value.tags.includes(e)))).slice(0,4)),P=t=>{if(!t)return"";if(t.startsWith("http"))return t;const e=window.location.hostname==="mrleemurray.github.io"?"/site":"";return t.startsWith("/")?`${e}${t}`:`${e}/${t}`},C=async()=>{v.value=!0,f.value=null,s.value=null,c.value="",h.value=[],y("sticky-title-change",null);try{const t=await b.loadProjectsData();w.value=t.projects,console.log("ðŸ” Loaded projects data:",t.projects.length);const e=await b.loadProjectContent(x.slug);console.log("ðŸ” Parsed content:",{frontmatter:!!e.frontmatter,contentLength:e.content.length}),s.value=e.frontmatter,console.log("ðŸ” Set project.value:",!!s.value,s.value?.title),y("sticky-title-change",s.value.title),c.value=b.parseMarkdownToHTML(e.content),console.log("ðŸ” Set markdownContent.value length:",c.value.length),h.value=b.extractTableOfContents(e.content),setTimeout(()=>{B()},100)}catch(t){f.value=t instanceof Error?t.message:"Failed to load project",console.error("Error loading project:",t)}finally{v.value=!1,console.log("ðŸ” loadProject finished. isLoading:",v.value,"project:",!!s.value)}};D(()=>x.slug,()=>{C()});const B=()=>{if(!g.value)return;const t=document.createElement("div");t.style.height="1px",t.style.position="absolute",t.style.top="calc(var(--space-16) - 7px)",t.style.left="0",t.style.right="0",t.style.pointerEvents="none",t.setAttribute("data-sticky-sentinel","true"),g.value.parentNode?.insertBefore(t,g.value),k=new IntersectionObserver(e=>{e.forEach(u=>{u.target===t&&(!u.isIntersecting&&s.value?.title?y("sticky-title-change",s.value.title):window.innerWidth<=767||y("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),k.observe(t)},U=()=>{k&&(k.disconnect(),k=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(e=>e.remove())},$=t=>{const e=document.getElementById(t);if(!e)return;const u=g.value?.offsetHeight||0,r=getComputedStyle(document.documentElement),V=(parseFloat(r.getPropertyValue("--space-16"))*16||64)-6+u+20,H=e.getBoundingClientRect().top+window.pageYOffset-V;window.scrollTo({top:H,behavior:"smooth"})};return F(()=>{C()}),I(()=>{U()}),(t,e)=>{const u=z("router-link");return l(),n("div",G,[o("div",Y,[v.value?(l(),n("div",J,[...e[0]||(e[0]=[o("div",{class:"loading-spinner"},null,-1),o("p",null,"Loading project...",-1)])])):f.value?(l(),n("div",K,[e[2]||(e[2]=o("h2",null,"Project Not Found",-1)),L(u,{to:"/",class:"btn btn-primary"},{default:S(()=>[...e[1]||(e[1]=[d(" â† Back to Projects ",-1)])]),_:1})])):p("",!0),!v.value&&!f.value&&!s.value&&c.value?(l(),n("div",Q,[e[3]||(e[3]=d(" ðŸ› DEBUG: Markdown without project!",-1)),e[4]||(e[4]=o("br",null,null,-1)),d(" Loading: "+a(v.value),1),e[5]||(e[5]=o("br",null,null,-1)),d(" Error: "+a(!!f.value),1),e[6]||(e[6]=o("br",null,null,-1)),d(" Project: "+a(!!s.value),1),e[7]||(e[7]=o("br",null,null,-1)),d(" Markdown: "+a(c.value.substring(0,50))+"... ",1)])):s.value?(l(),n("div",X,[o("div",Z,[o("img",{src:P(s.value.image),alt:s.value.title},null,8,ee)]),o("div",te,[o("div",oe,[o("div",{ref_key:"projectMetaRef",ref:g,class:"project-meta"},[o("div",se,[s.value.liveUrl?(l(),n("a",{key:0,href:s.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},a(s.value.liveUrlLabel||"View Live Site"),9,ne)):p("",!0),s.value.sourceUrl?(l(),n("a",{key:1,href:s.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},a(s.value.sourceUrlLabel||"View Source"),9,le)):p("",!0)]),o("div",re,[(l(!0),n(_,null,j(s.value.tags,r=>(l(),n("span",{key:r,class:"tag"},a(r),1))),128))])],512),c.value?(l(),n("div",{key:0,class:"markdown-content",innerHTML:c.value},null,8,ae)):(l(),n("div",ie,[...e[8]||(e[8]=[o("p",null,"Loading project details...",-1)])]))]),h.value.length>0?(l(),n("aside",{key:0,ref_key:"tocRef",ref:O,class:"content-sidebar"},[o("nav",ce,[e[9]||(e[9]=o("h3",null,"Table of Contents",-1)),o("ul",null,[(l(!0),n(_,null,j(h.value,r=>(l(),n("li",{key:r.id,class:W(`toc-level-${r.level}`)},[o("a",{href:`#${r.id}`,onClick:A(m=>$(r.id),["prevent"])},a(r.text),9,ue)],2))),128))])])],512)):p("",!0)]),M.value.length>0?(l(),n("section",de,[e[10]||(e[10]=o("h2",null,"Related Projects",-1)),o("div",ve,[(l(!0),n(_,null,j(M.value,r=>(l(),n("article",{key:r.id,class:"related-card"},[o("h3",null,[L(u,{to:`/projects/${r.id}`},{default:S(()=>[d(a(r.title),1)]),_:2},1032,["to"])]),o("p",null,a(r.description),1),o("div",pe,[(l(!0),n(_,null,j(r.tags.slice(0,3),m=>(l(),n("span",{key:m,class:"tag"},a(m),1))),128))])]))),128))])])):p("",!0)])):p("",!0)])])}}}),_e=q(fe,[["__scopeId","data-v-34406ad8"]]);export{_e as default};
