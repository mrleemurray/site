import{d as F,r as h,c as D,m as A,o as q,a as z,b as c,e as a,h as j,k as P,w as x,f as m,F as b,g as C,p as G,i as Y,j as u,n as J,q as K,l as E,_ as Q}from"./index-CN2H0SYJ.js";import{a as X,b as S,m as Z,f as ee,c as te,i as se,d as ne,e as oe,g as L,h as T,M as O}from"./projects-CnXvhSnm.js";const le=()=>{const s=new X({html:!0,linkify:!0,typographer:!0,breaks:!0});s.use(S,{permalink:S.permalink.headerLink()}),s.use(Z,{includeLevel:[1,2,3,4],containerClass:"table-of-contents",listType:"ul"}),s.use(ee),s.use(te,{enabled:!0}),s.use(se),s.use(ne),s.use(oe),s.use(L,"info",{render:(r,e)=>r[e].nesting===1?`<div class="callout callout-info">
`:`</div>
`}),s.use(L,"tip",{render:(r,e)=>r[e].nesting===1?`<div class="callout callout-tip">
`:`</div>
`}),s.use(L,"warning",{render:(r,e)=>r[e].nesting===1?`<div class="callout callout-warning">
`:`</div>
`}),s.use(L,"danger",{render:(r,e)=>r[e].nesting===1?`<div class="callout callout-danger">
`:`</div>
`}),s.renderer.rules.fence=(r,e)=>{const t=r[e],o=(t.info?t.info.trim():"").split(/\s+/g)[0];let i;if(o&&T.languages[o])try{i=T.highlight(t.content,T.languages[o],o)}catch(k){console.warn("Prism highlighting failed:",k),i=s.utils.escapeHtml(t.content)}else i=s.utils.escapeHtml(t.content);return`<pre><code class="hljs${o?` language-${o}`:""}">${i}</code></pre>`};const p=s.renderer.rules.link_open||function(r,e,t,g,o){return o.renderToken(r,e,t)};return s.renderer.rules.link_open=function(r,e,t,g,o){const i=r[e],f=i.attrGet("href");return f&&(f.startsWith("http")||f.startsWith("//"))&&(i.attrSet("target","_blank"),i.attrSet("rel","noopener noreferrer")),p(r,e,t,g,o)},s},H=le();function re(s,p=""){if(console.log("🔄 processEnhancedMarkdown called with:",{contentLength:s.length,basePath:p,hasCallouts:s.includes(":::"),hasTaskLists:s.includes("- [ ]")||s.includes("- [x]"),hasCodeBlocks:s.includes("```"),contentPreview:s.substring(0,100)}),!s||s.trim()==="")return console.warn("⚠️ Empty content passed to processEnhancedMarkdown"),"";let r=s;p&&(r=s.replace(/!\[([^\]]*)\]\(([^)]+)\)/gim,(t,g,o)=>{const i=o.startsWith("/")?`${p}${o}`:o.startsWith("http")?o:`${p}/${o}`;return`![${g}](${i})`})),console.log("🔧 About to render with markdown processor...");const e=H.render(r);return console.log("✅ Enhanced markdown processed:",{inputLength:r.length,resultLength:e.length,hasCalloutDivs:e.includes("callout-"),hasTaskListItems:e.includes("task-list-item"),hasHighlightedCode:e.includes('class="hljs'),hasAnyHTML:e.includes("<"),resultPreview:e.substring(0,200)}),(!e||e.trim()==="")&&console.error("❌ Markdown processor returned empty result!"),e}function ae(s){const p=H.parse(s,{}),r=[];return p.forEach(e=>{if(e.type==="heading_open"){const t=parseInt(e.tag.slice(1)),g=p[p.indexOf(e)+1];if(g&&g.type==="inline"){const o=g.content,i=o.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim();r.push({id:i,text:o,level:t})}}}),r}const ie={class:"project-detail"},ce={class:"project-container"},ue={key:0,class:"loading-state"},de={key:1,class:"error-state"},ge={key:2},pe={class:"project-image"},ve=["src","alt"],fe={class:"project-content"},he={class:"content-main"},me={class:"project-links"},ke=["href"],_e=["href"],ye={class:"project-tags"},we=["innerHTML"],je={key:1,class:"content-loading"},be={class:"toc","aria-label":"Table of contents"},Ce=["href","onClick"],Le={key:0,class:"related-projects"},Te={class:"related-grid grid grid-responsive"},Me={class:"related-tags"},$e=F({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(s,{emit:p}){const r=s,e=p,t=h(null),g=h([]),o=h(""),i=h([]),f=h(!1),k=h(null),_=h(),I=h();let y=null;const M=D(()=>!t.value||!g.value.length?[]:g.value.filter(n=>n.id!==t.value.id&&(n.category===t.value.category||n.tags.some(l=>t.value.tags.includes(l)))).slice(0,4)),B=n=>{if(!n)return"";if(n.startsWith("http"))return n;const l=window.location.hostname==="mrleemurray.github.io"?"/site":"";return n.startsWith("/")?`${l}${n}`:`${l}/${n}`},$=async()=>{console.log("🚀 loadProject called for slug:",r.slug),f.value=!0,k.value=null,t.value=null,o.value="",i.value=[],e("sticky-title-change",null);try{console.log("📥 Loading projects data...");const n=await O.loadProjectsData();g.value=n.projects,console.log("✅ Projects data loaded:",n.projects.length),console.log("📄 Loading project content for:",r.slug);const l=await O.loadProjectContent(r.slug);t.value=l.frontmatter,console.log("✅ Project frontmatter loaded:",t.value.title),console.log("📝 Raw content length:",l.content.length),console.log("📝 Content preview:",l.content.substring(0,200)),e("sticky-title-change",t.value.title);const v=window.location.hostname==="mrleemurray.github.io"?"/site":"";console.log("🔗 Base path:",v),console.log("⚙️ Processing markdown..."),o.value=re(l.content,v),console.log("✅ Processed markdown length:",o.value.length),console.log("🎨 Processed markdown preview:",o.value.substring(0,300)),i.value=ae(l.content),console.log("📚 TOC extracted:",i.value.length,"items"),await G(),console.log("🔍 Final markdown content check:",{hasCallouts:o.value.includes("callout-"),hasTaskLists:o.value.includes("task-list-item"),hasHTML:o.value.includes("<"),isEmpty:o.value.trim()===""}),setTimeout(()=>{R()},100)}catch(n){console.error("❌ Error loading project:",n),k.value=n instanceof Error?n.message:"Failed to load project"}finally{f.value=!1,console.log("🏁 loadProject completed")}};A(()=>r.slug,()=>{$()});const R=()=>{if(!_.value)return;const n=document.createElement("div");n.style.height="1px",n.style.position="absolute",n.style.top="calc(var(--space-16) - 7px)",n.style.left="0",n.style.right="0",n.style.pointerEvents="none",n.setAttribute("data-sticky-sentinel","true"),_.value.parentNode?.insertBefore(n,_.value),y=new IntersectionObserver(l=>{l.forEach(v=>{v.target===n&&(!v.isIntersecting&&t.value?.title?e("sticky-title-change",t.value.title):window.innerWidth<=767||e("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),y.observe(n)},N=()=>{y&&(y.disconnect(),y=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(l=>l.remove())},U=n=>{const l=document.getElementById(n);if(!l)return;const v=_.value?.offsetHeight||0,d=getComputedStyle(document.documentElement),V=(parseFloat(d.getPropertyValue("--space-16"))*16||64)-6+v+20,W=l.getBoundingClientRect().top+window.pageYOffset-V;window.scrollTo({top:W,behavior:"smooth"})};return q(()=>{$()}),z(()=>{N()}),(n,l)=>{const v=Y("router-link");return u(),c("div",ie,[a("div",ce,[f.value?(u(),c("div",ue,[...l[0]||(l[0]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Loading project...",-1)])])):k.value?(u(),c("div",de,[l[2]||(l[2]=a("h2",null,"Project Not Found",-1)),P(v,{to:"/",class:"btn btn-primary"},{default:x(()=>[...l[1]||(l[1]=[E(" ← Back to Projects ",-1)])]),_:1})])):t.value?(u(),c("div",ge,[a("div",pe,[a("img",{src:B(t.value.image),alt:t.value.title},null,8,ve)]),a("div",fe,[a("div",he,[a("div",{ref_key:"projectMetaRef",ref:_,class:"project-meta"},[a("div",me,[t.value.liveUrl?(u(),c("a",{key:0,href:t.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(t.value.liveUrlLabel||"View Live Site"),9,ke)):j("",!0),t.value.sourceUrl?(u(),c("a",{key:1,href:t.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},m(t.value.sourceUrlLabel||"View Source"),9,_e)):j("",!0)]),a("div",ye,[(u(!0),c(b,null,C(t.value.tags,d=>(u(),c("span",{key:d,class:"tag"},m(d),1))),128))])],512),o.value?(u(),c("div",{key:`markdown-${r.slug}-${o.value.length}`,class:"markdown-content",innerHTML:o.value},null,8,we)):(u(),c("div",je,[...l[3]||(l[3]=[a("p",null,"Loading project details...",-1)])]))]),i.value.length>0?(u(),c("aside",{key:0,ref_key:"tocRef",ref:I,class:"content-sidebar"},[a("nav",be,[l[4]||(l[4]=a("h3",null,"Table of Contents",-1)),a("ul",null,[(u(!0),c(b,null,C(i.value,d=>(u(),c("li",{key:d.id,class:J(`toc-level-${d.level}`)},[a("a",{href:`#${d.id}`,onClick:K(w=>U(d.id),["prevent"])},m(d.text),9,Ce)],2))),128))])])],512)):j("",!0)]),M.value.length>0?(u(),c("section",Le,[l[5]||(l[5]=a("h2",null,"Related Projects",-1)),a("div",Te,[(u(!0),c(b,null,C(M.value,d=>(u(),c("article",{key:d.id,class:"related-card"},[a("h3",null,[P(v,{to:`/projects/${d.id}`},{default:x(()=>[E(m(d.title),1)]),_:2},1032,["to"])]),a("p",null,m(d.description),1),a("div",Me,[(u(!0),c(b,null,C(d.tags.slice(0,3),w=>(u(),c("span",{key:w,class:"tag"},m(w),1))),128))])]))),128))])])):j("",!0)])):j("",!0)])])}}}),He=Q($e,[["__scopeId","data-v-2a32940d"]]);export{He as default};
