import{d as H,r as c,c as I,m as N,o as R,a as D,b as s,e as o,h as m,k as T,w as x,l as v,f as a,F as j,g as b,i as W,j as n,n as A,p as q,_ as z}from"./index-BpN4f0HD.js";import{M as w}from"./projects-rJ5N_cbk.js";const G={class:"project-detail"},Y={class:"project-container"},J={key:0,class:"loading-state"},K={key:1,class:"error-state"},Q={key:2,style:{padding:"20px",background:"red",color:"white"}},X={key:3},Z={class:"project-image"},ee=["src","alt"],te={class:"project-content"},oe={class:"content-main"},le={class:"project-links"},se=["href"],ne=["href"],re={class:"project-tags"},ae=["innerHTML"],ie={key:1,class:"content-loading"},ce={class:"toc","aria-label":"Table of contents"},ue=["href","onClick"],de={key:0,class:"related-projects"},ve={class:"related-grid grid grid-responsive"},pe={class:"related-tags"},ge=H({__name:"Project",props:{slug:{}},emits:["sticky-title-change"],setup(S,{emit:E}){const p=S,y=E,l=c(null),L=c([]),i=c(""),_=c([]),u=c(!1),h=c(null),g=c(),O=c();let f=null;const C=I(()=>!l.value||!L.value.length?[]:L.value.filter(t=>t.id!==l.value.id&&(t.category===l.value.category||t.tags.some(e=>l.value.tags.includes(e)))).slice(0,4)),P=t=>{if(!t)return"";if(t.startsWith("http"))return t;const e=window.location.hostname==="mrleemurray.github.io"?"/site":"";return t.startsWith("/")?`${e}${t}`:`${e}/${t}`},M=async()=>{console.log("🔵 loadProject() called for slug:",p.slug),u.value=!0,h.value=null,l.value=null,i.value="",_.value=[],console.log("🔵 Initial state:",{isLoading:u.value,project:l.value,markdownContent:i.value}),y("sticky-title-change",null);try{console.log("🔵 Loading projects data...");const t=await w.loadProjectsData();L.value=t.projects,console.log("🔵 Loaded projects:",t.projects.length),console.log("🔵 Loading project content for:",p.slug);const e=await w.loadProjectContent(p.slug);l.value=e.frontmatter,console.log("🔵 Loaded project frontmatter:",e.frontmatter),y("sticky-title-change",l.value.title),i.value=w.parseMarkdownToHTML(e.content),_.value=w.extractTableOfContents(e.content),console.log("🔵 Final state:",{isLoading:u.value,project:!!l.value,markdownLength:i.value.length,projectTitle:l.value?.title}),setTimeout(()=>{B()},100)}catch(t){h.value=t instanceof Error?t.message:"Failed to load project",console.error("❌ Error loading project:",t)}finally{u.value=!1,console.log("🔵 loadProject() finished. isLoading:",u.value)}};N(()=>p.slug,()=>{M()});const B=()=>{if(!g.value)return;const t=document.createElement("div");t.style.height="1px",t.style.position="absolute",t.style.top="calc(var(--space-16) - 7px)",t.style.left="0",t.style.right="0",t.style.pointerEvents="none",t.setAttribute("data-sticky-sentinel","true"),g.value.parentNode?.insertBefore(t,g.value),f=new IntersectionObserver(e=>{e.forEach(d=>{d.target===t&&(!d.isIntersecting&&l.value?.title?y("sticky-title-change",l.value.title):window.innerWidth<=767||y("sticky-title-change",null))})},{rootMargin:"0px",threshold:0}),f.observe(t)},U=()=>{f&&(f.disconnect(),f=null),document.querySelectorAll("[data-sticky-sentinel]").forEach(e=>e.remove())},$=t=>{const e=document.getElementById(t);if(!e)return;const d=g.value?.offsetHeight||0,r=getComputedStyle(document.documentElement),V=(parseFloat(r.getPropertyValue("--space-16"))*16||64)-6+d+20,F=e.getBoundingClientRect().top+window.pageYOffset-V;window.scrollTo({top:F,behavior:"smooth"})};return R(()=>{console.log("🟢 Project.vue onMounted() called for slug:",p.slug),M()}),D(()=>{U()}),(t,e)=>{const d=W("router-link");return n(),s("div",G,[o("div",Y,[u.value?(n(),s("div",J,[...e[0]||(e[0]=[o("div",{class:"loading-spinner"},null,-1),o("p",null,"Loading project...",-1)])])):h.value?(n(),s("div",K,[e[2]||(e[2]=o("h2",null,"Project Not Found",-1)),T(d,{to:"/",class:"btn btn-primary"},{default:x(()=>[...e[1]||(e[1]=[v(" ← Back to Projects ",-1)])]),_:1})])):!l.value&&i.value?(n(),s("div",Q,[e[3]||(e[3]=v(" DEBUG: Markdown loaded but no project data! ",-1)),e[4]||(e[4]=o("br",null,null,-1)),v("isLoading: "+a(u.value)+" ",1),e[5]||(e[5]=o("br",null,null,-1)),v("error: "+a(h.value)+" ",1),e[6]||(e[6]=o("br",null,null,-1)),v("project: "+a(l.value)+" ",1),e[7]||(e[7]=o("br",null,null,-1)),v("markdownContent length: "+a(i.value.length),1)])):l.value?(n(),s("div",X,[o("div",Z,[o("img",{src:P(l.value.image),alt:l.value.title},null,8,ee)]),o("div",te,[o("div",oe,[o("div",{ref_key:"projectMetaRef",ref:g,class:"project-meta"},[o("div",le,[l.value.liveUrl?(n(),s("a",{key:0,href:l.value.liveUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},a(l.value.liveUrlLabel||"View Live Site"),9,se)):m("",!0),l.value.sourceUrl?(n(),s("a",{key:1,href:l.value.sourceUrl,class:"project-link",target:"_blank",rel:"noopener noreferrer"},a(l.value.sourceUrlLabel||"View Source"),9,ne)):m("",!0)]),o("div",re,[(n(!0),s(j,null,b(l.value.tags,r=>(n(),s("span",{key:r,class:"tag"},a(r),1))),128))])],512),i.value?(n(),s("div",{key:0,class:"markdown-content",innerHTML:i.value},null,8,ae)):(n(),s("div",ie,[...e[8]||(e[8]=[o("p",null,"Loading project details...",-1)])]))]),_.value.length>0?(n(),s("aside",{key:0,ref_key:"tocRef",ref:O,class:"content-sidebar"},[o("nav",ce,[e[9]||(e[9]=o("h3",null,"Table of Contents",-1)),o("ul",null,[(n(!0),s(j,null,b(_.value,r=>(n(),s("li",{key:r.id,class:A(`toc-level-${r.level}`)},[o("a",{href:`#${r.id}`,onClick:q(k=>$(r.id),["prevent"])},a(r.text),9,ue)],2))),128))])])],512)):m("",!0)]),C.value.length>0?(n(),s("section",de,[e[10]||(e[10]=o("h2",null,"Related Projects",-1)),o("div",ve,[(n(!0),s(j,null,b(C.value,r=>(n(),s("article",{key:r.id,class:"related-card"},[o("h3",null,[T(d,{to:`/projects/${r.id}`},{default:x(()=>[v(a(r.title),1)]),_:2},1032,["to"])]),o("p",null,a(r.description),1),o("div",pe,[(n(!0),s(j,null,b(r.tags.slice(0,3),k=>(n(),s("span",{key:k,class:"tag"},a(k),1))),128))])]))),128))])])):m("",!0)])):m("",!0)])])}}}),he=z(ge,[["__scopeId","data-v-974f13a6"]]);export{he as default};
